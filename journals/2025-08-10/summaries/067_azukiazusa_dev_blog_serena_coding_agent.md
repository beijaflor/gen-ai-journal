## コーディングエージェントの能力を拡張する Serena を試してみた

https://azukiazusa.dev/blog/serena-coding-agent/

SerenaはLSPを活用したセマンティックなコード検索・編集能力をコーディングエージェントにもたらし、効率的な開発ワークフローを実現します。

**Content Type**: ⚙️ Tools

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 86/100 | **Annex Potential**: 84/100 | **Overall**: 84/100

**Topics**: [[コーディングエージェント, LSP, MCP, Claude Code, コードリファクタリング]]

記事は、コーディングエージェントの能力を拡張するオープンソースツールキット「Serena」の導入と実践的な活用法を解説しています。SerenaはMCP（Model Context Protocol）サーバーとして機能し、LSP（Language Server Protocol）を活用してセマンティックなコード検索・編集能力を提供します。これにより、Claude CodeやCursorといったMCP対応クライアントで利用可能になります。

Serenaが重要である理由は、既存のコーディングエージェントが持つ課題を解決し、開発ワークフローを劇的に効率化する点にあります。従来のエージェントは関数の定義を探すだけでも関数名での`grep`や`search`といった単純な文字列検索に依存し、コードベース全体を走査することで多くのトークンを消費していました。しかしSerenaは、LSPによる構文解析とシンボル解決能力を活かし、キャッシュされたシンボルリストから効率的に必要なコンテキストを取得します。これは人間がIDEで関数の定義にジャンプしたりシンボルを検索したりする感覚に近く、トークン消費を大幅に削減します。実際に、記事ではMCPサーバーを使用しない場合と比較し、リファクタリング時のトークン使用量が約27,000トークンから約9,500トークンへと、約1/3に削減された具体的な事例を紹介しています。この効率性は、LLMの利用コスト削減にも直結します。

また、Serenaは単なるテキスト置換に留まらず、`replace_regex`で正規表現を指定したり、`insert_before_symbol`や`insert_after_symbol`で特定のシンボルの前後にコードを挿入したりするなど、よりセマンティックかつ効率的なコード編集ツールを提供します。これにより、既存エージェントで頻発する「No changes to make」のような非効率なエラーも抑制されます。Serenaは、初回オンボーディングプロセスを通じてプロジェクトのディレクトリ構造やシンボル概要を把握し、`project_overview.md`などのメモリファイルを自動生成します。この機能は、エージェントが大規模で複雑なコードベースを扱う上での深い理解を促す基盤となり、将来のタスク遂行においてより的確な行動を可能にします。

ウェブアプリケーションエンジニアにとって、Serenaの導入は、AIエージェントによる開発効率向上への具体的な一歩となります。特に大規模プロジェクトにおけるAI活用や、より精密なコード操作、そしてコスト効率を追求する場面で、その真価を発揮するでしょう。