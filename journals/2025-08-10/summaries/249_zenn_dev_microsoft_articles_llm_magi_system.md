## MAGIシステムをAzure OpenAIで作る

https://zenn.dev/microsoft/articles/llm-magi-system

複数のLLMエージェントが合議して意思決定を行う「MAGIシステム」の実装方法と、その応用可能性を解説する。

**Content Type**: ⚙️ Tools

**Scores**: Signal:4/5 | Depth:4/5 | Unique:3/5 | Practical:4/5 | Anti-Hype:5/5
**Main Journal**: 78/100 | **Annex Potential**: 76/100 | **Overall**: 80/100

**Topics**: [[LLM, マルチエージェント, ハルシネーション対策, Azure OpenAI, 意思決定支援]]

近年、LLMの推論精度は向上したものの、実務における複雑な意思決定では、ハルシネーションやそもそも答えが決定的でない課題が残ります。この記事では、人間が複数の視点から議論し合議するプロセスに着想を得て、この課題を解決する「MAGIシステム」をAzure OpenAI上に実装する手法を解説しています。

新世紀エヴァンゲリオンに登場する同名のシステムのように、複数のAIエージェント（「賢者」と命名）がそれぞれ独立したパーソナリティ（例：「論理的」「慎重」「感情的」）を持ち推論を行い、その結果を合議して最終的な意思決定を行うのが特徴です。これにより、個々のAIの判断ミスやハルシネーションのリスクを低減し、より信頼性の高い出力を得ることが可能になります。例えば、製品出荷判定やソフトウェア設計レビューなど、複数の意見を必要とする場面をAIで再現できる可能性を示唆しています。

著者は、この合議制システムを実装するためのC#ライブラリ「MagiSystem」を開発し、GitHubで公開しています。核となるのは、指定されたパーソナリティで議題に投票する`Sage`クラスと、複数の`Sage`を束ねて多数決で最終決定を下す`MagiService`クラスです。特に、LLMの応答を構造化されたJSON形式で確実に取得するために`ChatResponseFormat.ForJsonSchema`を使用している点が、堅牢なシステム構築において具体的な実装パターンとして非常に参考になります。

このアプローチは、LLMを単なる情報生成ツールとしてではなく、より信頼性の高い複雑なビジネスロジックや意思決定プロセスの一部として組み込む際に非常に有効です。多様な「賢者」の視点を取り入れることで、多角的な判断を必要とするユースケース（例：コードレビューの自動化、製品仕様の合意形成、リスク評価など）において、LLMベースのアプリケーションの信頼性と実用性を飛躍的に向上させる可能性を秘めています。これは、AIを活用した開発ワークフローを次のレベルへと引き上げる重要な示唆となります。