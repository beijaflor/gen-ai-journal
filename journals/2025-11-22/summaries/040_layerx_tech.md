## LLMで業務ワークフローを自動生成・最適化する! 〜ワークフロー自動生成・最適化の取り組みについて〜

https://tech.layerx.co.jp/entry/2025/11/19/133143

LayerXは、LLMとPythonを活用し、300ページ超の報告書からのデータ抽出タスクを自動化することで、業務ワークフローの自動生成・最適化技術がどのように大規模データ処理の課題を解決し、実用レベルの精度を達成するかを具体的に示します。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:5/5 | Depth:5/5 | Unique:4/5 | Practical:4/5 | Anti-Hype:4/5
**Main Journal**: 88/100 | **Annex Potential**: 87/100 | **Overall**: 88/100

**Topics**: [[LLMエージェント, ワークフロー自動生成, 大規模文書処理, プロンプトエンジニアリング, Code-LLM連携]]

LayerXのAI Workforce事業部R&Dチームは、LLMとPythonを組み合わせた業務ワークフローの自動生成・最適化技術に関する取り組みを紹介しています。複雑な実務タスクにおいて、AIワークフローの構築には、ノード構成やプロンプト設計に多大な時間と労力がかかり、またLLMの変更やデータ構造の変化に対して堅牢性を保つことが難しいという課題がありました。

この課題を解決するため、同チームはプロンプトとワークフロー構造を同時に自動生成する手法を開発しました。このシステムは、ワークフロー候補を生成する「Generator」、生成されたフローを実行する「Executor」、実行結果を評価する「Evaluator」、そして過去の試行結果から学習しフィードバックする「Memory」の4つのコンポーネントで構成されます。これにより、試行錯誤を繰り返しながら、ワークフロー構造とプロンプト、コードを自動的に洗練させることが可能になります。1回の試行にかかる時間は10～15分程度、コストは約5ドルと試算されています。

具体例として、300ページ（約85万文字）を超えるプロジェクト完了報告書から、最大6層の階層構造を持つ48個の実績データを構造化抽出・計算するタスクが挙げられています。このタスクにおいて、アルゴリズムは以下の6つのノードからなるワークフローを自動生成し、訓練データで約90%の精度を達成しました。

1.  **テキスト化（Codeノード）**: PDFをページごとにテキスト化。
2.  **重要ページ判定（LLMノード・ループ処理）**: 各ページのカテゴリ分類と数値の有無を判定し、重要ページを絞り込む。大規模データに対するチャンキング戦略を自動発見し、85万文字を8.5万文字に圧縮。
3.  **重要ページ選択・結合（Codeノード）**: 判定結果に基づき、重要ページをカテゴリ優先度でソートし、LLMのコンテキスト制限（8.5万文字）内で結合。
4.  **データ抽出（LLMノード）**: 結合されたテキストから48個の数値を抽出。「計算禁止」を明示し、LLMの役割を「読み取り」に限定。
5.  **合計値計算（Codeノード）**: 抽出された数値から合計値や差異、密度などをPythonで確実に計算。
6.  **単位正規化（Codeノード）**: パーセント値の整数化など、最終的な出力形式に変換。

この取り組みの重要な点は、アルゴリズムがLLMのコンテキスト制限という技術的制約を考慮し、大規模データに対するチャンキング戦略を人間が指示することなく自動的に発見したことです。また、LLMには「読み取り」「分類」「判断」といった意味理解タスクを、Pythonには「計算」「データ変換」といった確実性が求められるタスクを割り当てるという、最適な役割分担も自動的に見出されました。

この技術は、複雑なビジネスドメインにおけるAIワークフローの構築と運用を効率化し、開発者が試行錯誤に費やす時間を大幅に削減する可能性を示唆しており、LLMの不確実性を補完しつつ、大規模データ処理を堅牢に行うための具体的なアプローチとして注目されます。今後は、汎化性能の検証とさらなる複雑なタスクへの適用が計画されています。