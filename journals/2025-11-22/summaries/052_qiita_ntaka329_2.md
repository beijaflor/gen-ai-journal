## GitHub Copilot Plan modeで実装の手戻りが改善した話 - Agent modeとの比較で分かる真価

https://qiita.com/ntaka329/items/8595b9668158a563c35f

VS Code 1.106で正式リリースされたGitHub Copilot Plan modeが、対話的な仕様確認と詳細設計相当の計画策定により、実装フェーズでの手戻りを劇的に改善すると筆者は解説します。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:3/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 81/100 | **Annex Potential**: 77/100 | **Overall**: 80/100

**Topics**: [[GitHub Copilot, Plan mode, Agent mode, 開発効率化, 詳細設計, OpenAPI]]

GMOコネクトの永田氏が、VS Code 1.106で正式リリースされたGitHub Copilot Plan modeの真価を、既存のAgent modeとの比較を通じて解説しています。筆者は、Plan modeが実装の手戻りや認識齟齬を改善する鍵であると指摘します。

Plan modeの導入により、開発フローは「計画策定（Plan）→仕様レビュー→実装（Agent）→ソースレビュー」の2段階構成に進化します。これにより、従来のAgent modeで実装を依頼した際に「思っていたのと違う」結果になる課題が解決されると主張されています。

Plan modeの主な機能は以下の通りです。
1.  **複雑なタスクのブレイクダウン**: 大規模なタスクを実装前に小タスクに分割し、全体像と進め方を明確に可視化します。これにより、認知負荷や実装ミスを削減し、タスク管理の属人性を排除します。
2.  **仕様明確化と事前承認**: Copilotが仕様の曖昧さや抜け漏れを「Further Considerations」として事前に質問し、詳細な計画を生成します。開発者はこの計画を承認することで、早い段階での合意形成が可能となり、仕様認識のずれによる手戻りを大幅に削減します。
3.  **承認済みプランの自動実装とプロセス可視化**: 承認された計画はCopilotによって自動実装され、進捗と内容が把握しやすくなり、開発プロセスの統制が強化されます。

筆者は、Plan modeの中身を構成するプロンプトの要点も分析。特に「考える（計画）」と「作る（実装）」を厳格に分離する指示や、「Open Questions」で仕様の曖昧さを明示的に質問し、選択肢を提示する計画スタイルが、計画の質を高め、従来のAgent modeで発生しがちだった「思ったものと違う実装」を防ぐ根本的な対策になっていると解説しています。

実例としてAPIドキュメント作成タスクで検証した結果、Agent modeがMarkdownで冗長なドキュメントを出力したのに対し、Plan modeは「Further Considerations」を通じて出力形式や仕様詳細（OpenAPI 3.x YAML形式、IPv4/IPv6対応、プロトコルのIANA番号など）を対話的に確認し、合意形成後に正確なOpenAPI YAML形式でドキュメントを生成しました。

この結果から筆者は、曖昧さの残る作業依頼に対してPlan modeを活用することで、作業方針・実装方針を事前にすり合わせ、アウトプットの質向上とレビュー工数削減に大きく寄与するとの実感を得たと結論付けています。大規模・複雑なタスクではPlan modeで事前の方針レビューを行い、簡潔な要件であればAgent mode単独で対応するという使い分けが重要であると提言されています。