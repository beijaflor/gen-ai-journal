## "あの頃"の強かったClaude Codeを少しでも取り戻す方法

https://zenn.dev/discus0434/scraps/e0b1a0aa5406eb

Claude Codeの性能劣化に直面している開発者向けに、コンテキスト圧縮の無効化、思考表示のレガシー化、IDE連携の停止、そしてバージョン管理といった具体的な設定とテクニックを提示し、ツール本来のパフォーマンスを取り戻す方法を詳述します。

**Content Type**: ⚙️ Tools

**Scores**: Signal:3/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 82/100 | **Annex Potential**: 81/100 | **Overall**: 80/100

**Topics**: [[AIコーディングツール, LLM性能最適化, コンテキスト管理, 開発ワークフロー改善, 設定とトラブルシューティング]]

多くの開発者がClaude Codeのパフォーマンス低下を指摘する中、本記事は、その原因が「Micro Compact」による積極的なコンテキスト要約や、新しい「思考表示」UIにあると推測しています。これは、AIの健忘症や思考プロセスの不透明化を招き、Webアプリケーション開発における効率やコード品質に直接影響し、手戻りやデバッグのコストを増大させます。

この問題に対処するため、記事では以下の具体的な対策を提案しています。

まず、**`DISABLE_MICROCOMPACT=1`** を設定してコンテキストの早期要約を停止し、AIが過去の参照情報を適切に保持できるよう促します。これにより、LLMがコード全体や会話履歴の重要な詳細を忘れてしまうのを防ぎ、より一貫性のある正確な提案が可能になります。次に、**`DISABLE_INTERLEAVED_THINKING=1`** で思考表示をレガシーモードに戻し、LLMの動作をより明確に把握し、不適切な推論に早期介入できるようにします。これは、AIが暴走したり、意図しないコードを生成したりするリスクを低減し、開発者のコントロールを強化します。

さらに、**IDE連携の無効化** (`CLAUDE_CODE_AUTO_CONNECT_IDE=0`など) は、不要なコンテキスト注入を防ぎ、よりクリーンなコード生成環境を確立します。**オートアップデートやテレメトリーの停止**も、予期せぬ機能変更や通信によるパフォーマンス低下を回避するために推奨されます。究極の手段として、**Claude Codeのバージョンを安定していた旧版（例: `1.0.24`）にダウングレード**する方法も紹介されており、これにより根本的な性能問題を確実に回避できる選択肢が提供されます。

設定変更以外にも、`serena MCP`の導入、`MAX_THINKING_TOKENS`の増量、**`@relative/path/to/file`による関連ファイルの強制読み込み**、そして`CLAUDE.md`などを活用した**大規模ファイルの効率的な読み込み指示**といった具体的な運用テクニックも解説されています。これにより、Claudeがコード全体を正確に理解し、重複実装や誤ったコード生成を防ぎます。

これらの対策は、AIコーディングツールの「ブラックボックス化」を打破し、開発者がLLMの挙動をよりコントロール可能にすることで、AIとの協調作業の効率性と信頼性を飛躍的に向上させます。特に、コンテキスト管理の最適化は、大規模プロジェクトや複雑なタスクに携わるWebアプリケーションエンジニアにとって、誤った推論や健忘症による手戻りを劇的に減らし、生産性を維持・向上させる上で不可欠な知見となるでしょう。