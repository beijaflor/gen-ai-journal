## 5年間 Laravel を使って辿り着いた，AI 時代に考える「なんちゃってクリーンアーキテクチャ」のその先

https://zenn.dev/yumemi_inc/articles/ebc6e634fa57a1

大規模開発に耐えうるモジュラーモノリス構造と4層アーキテクチャを提案し、AIによる開発効率化とコードの健全性を両立させる。

**Content Type**: 🛠️ Technical Reference
**Language**: ja

**Scores**: Signal:5/5 | Depth:5/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 94/100 | **Annex Potential**: 88/100 | **Overall**: 92/100

**Topics**: [[Laravel, クリーンアーキテクチャ, モジュラーモノリス, PHP 8.4, AI-driven development]]

Laravelにおける設計指針として長らく支持されてきた「なんちゃってクリーンアーキテクチャ」の限界を超え、AI Agentとの協業を前提としたより堅牢なアーキテクチャへの進化を提唱する。

筆者は、従来の簡略化された設計ではドメイン間の境界が曖昧になり、大規模開発や複数チームでの並行開発において依存関係の複雑化を招くと指摘している。特に現代のAI時代においては、ファイル数や記述量の増加というデメリットがAIによって解消される一方、AIが「適切に修正スコープを絞り込み、破壊的な変更を防ぐ」ための厳格な関心事の分離こそが重要であると論じている。

この課題に対し、著者は以下の3つの柱からなる設計手法を提示している。
1. **Contractによるモジュール分割**: 機能を業務ドメインごとに「モジュール」として分離し、他モジュールとの通信を「Contract（公開API）」経由に限定する。これにより、内部実装を隠蔽しながらAI Agentが独立して作業できる境界を明示する。
2. **4層アーキテクチャの徹底**: Presentation、Application、Domain、Infrastructureの各層に責務を分解し、ドメインロジックを純粋なPHPとしてEloquent Modelから切り離す。これによりテスタビリティを高め、AIがビジネスルールに集中できる環境を整える。
3. **静的解析ツール（deptrac）の導入**: 定義した依存ルールをCIで強制することで、AIが生成したコードのアーキテクチャ違反を自動検出し、レビュー負荷を軽減する。

さらに、PHP 8.4の最新機能である「Property Hooks」や「Interfaceのプロパティ宣言」を活用し、ドメインエンティティのボイラープレート（getter地獄）を排除する具体的なコード例も紹介されている。筆者によれば、この設計を採用したプロジェクトではコードの9割以上をAIが執筆しており、アーキテクチャの堅牢さがAI Agentを正しい方向に導くための「ガードレール」として機能しているという。

単なる技術解説に留まらず、AI時代のエンジニアが設計に注力すべき理由と、そのための実践的なフレームワークを提示した、現場視点の強いリファレンスである。