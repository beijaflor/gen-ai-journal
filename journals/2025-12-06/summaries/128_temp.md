## AIでデータ抽出するならBEAM＊を取り入れよう

https://zenn.dev/gaudiy_blog/articles/03f029c82099cf

生成AIによるデータ抽出時のハルシネーションやプロンプト調整の難しさを解決するため、ディメンショナル・モデリングとBEAM\*フレームワークを組み合わせたデータ基盤改善アプローチを提案します。

**Content Type**: 📖 Tutorial & Guide
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 88/100 | **Annex Potential**: 85/100 | **Overall**: 84/100

**Topics**: [[生成AI, データ抽出, ディメンショナル・モデリング, BEAM*フレームワーク, データ品質]]

昨今、生成AIを用いたText-to-SQLなどのデータ抽出において、簡単な集計は可能でも複雑なクエリでハルシネーションが発生したり、プロンプトチューニングが他の集計に悪影響を与えたりする問題が指摘されています。本記事は、これらの課題に対し、プロンプト固定化とAIの出力を基にしたデータ基盤のアップデートという、データ構造側からの解決策を提案しています。

著者はまず、生成AIとディメンショナル・モデリングの相性の良さを強調します。ディメンショナル・モデリングは、データを「測定（Fact）」と「文脈（Dimension）」に分離することで、スキーマの探索を容易にし、集約・フィルタリングのルールを明確にします。さらに、会社固有のドメイン知識をスキーマに埋め込むことで、AIが暗黙知に遭遇することなく、シンプルなSQLで正確な結果に到達できるようになると説明します。

しかし、完璧なスタースキーマがあっても、人間のデータ抽出要件の曖昧さがAIの期待外れの出力を招くため、ディメンショナル・モデリングだけでは不十分だと指摘します。そこで、アジャイルなデータウェアハウス設計フレームワークである「BEAM\*（Business Event Analysis & Modeling）」の活用を提案します。BEAM\*は「モデルストーミング」と呼ばれるワークショップ形式で、7W（Who, What, When, Where, How Many, Why, How）を用いてビジネスイベントを詳細に洗い出し、汎用的なFact/Dimensionを設計します。

著者は、このBEAM\*の7W整理をAIに行わせるシステムプロンプトの具体的なイメージを提示します。例えば、「キャンペーンAの参加状況」といった曖昧な依頼に対し、AIが7Wに沿って「Who: ユーザー」「What: キャンペーン応募イベント」「When: 先月」「How Many: 応募ユーザー数（ユニークカウント）」のように詳細化し、依頼者に確認させることで、要件の齟齬を防ぎ、意図した結果が得られるようになると主張します。

そして、AIに7W整理をさせてもSQLが間違っている場合、それはデータ基盤側に「必要なDimensionやFactが存在しない」あるいは「定義が曖昧である」といった不備があることを示唆すると結論付けています。これにより、データ基盤の作成・更新を促し、継続的な改善サイクルを生み出すことができると述べ、生成AIを用いたデータ抽出が単なる効率化だけでなく、データ基盤がビジネスの実態をどれだけ正しく表現できているかを検証する機会にもなると締めくくっています。