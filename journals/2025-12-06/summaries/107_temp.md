## Claude Code のプランモードがより正確な計画を立てられるようになっていた

https://azukiazusa.dev/blog/claude-code-plan-mode-improved/

Claude Codeのプランモードが専用サブエージェントの導入、ユーザーへの不明点確認機能、詳細な仕様書形式での計画保存により、より正確かつ実践的な開発計画を生成できるよう進化しました。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:3/5 | Depth:4/5 | Unique:2/5 | Practical:4/5 | Anti-Hype:4/5
**Main Journal**: 95/100 | **Annex Potential**: 86/100 | **Overall**: 68/100

**Topics**: [[AIコーディング, Claude Code, エージェント開発, 仕様駆動開発, 開発ツール]]

この記事は、AnthropicのAIコーディングツール「Claude Code」のプランモードが最近どのように改善されたかを詳細に解説しています。主な改善点は以下の3点です。

第一に、プランの計画に専用の「プランサブエージェント」が導入されました。これまでファイル探索には軽量なHaikuモデルを使用した探索サブエージェントが使われていましたが、プランサブエージェントはより強力なSonnetモデルを使用することで、メインエージェントのコンテキストを汚染せずに専門的な計画タスクを効率的に処理します。これにより、コードベースの構造分析やコンテキスト収集がより正確に行えるようになりました。

第二に、ユーザーのプロンプトが不十分な場合、プランモードの途中で不明な点をユーザーに確認する機能が追加されました。ラジオボタンやチェックボックス、自由記述形式でユーザーが回答することで、AIはより正確な要件を把握し、ユーザー自身が見落としていた潜在的な要件まで明らかにできます。例えば、「タスク編集・削除機能」の実装指示に対し、編集可能なフィールドを具体的に尋ねるなど、対話を通じて計画の精度を高めます。

第三に、生成された計画が以前の概要レベルから大幅に進化し、`~/.claude/plans/xxx.md`に詳細な仕様書形式で保存されるようになりました。この計画書には、実装ステップ、具体的なコード例（例: `updateTask`、`deleteTask`サーバーアクションのパターン）、技術的な設計判断（例: ドラッグ&ドロップの干渉防止策、楽観的更新の非採用理由）、テスト戦略、受け入れ基準、ファイル構成のサマリー、予想実装時間まで網羅されています。これは「仕様駆動開発 (Specification-Driven Development, SDD)」の考え方に近いと著者は指摘しており、開発者は計画段階で具体的な実装の詳細を網羅的に把握できるようになります。

著者は、これらの改善により、Claude Codeがより実践的で信頼性の高い開発支援ツールになったと評価しつつ、計画が長文化することによる可読性の低下やレートリミットに達しやすくなるといった課題も今後の改善点として挙げています。