## Gemini/Claudeから箱庭ドローンを操作！MCPクライアント連携の仕組みを作った

https://qiita.com/kanetugu2018/items/d944b0c589a0647aded3

MCPサーバーを活用し、GeminiやClaudeといったAIエージェントが国産ドローンシミュレータ「箱庭ドローン」を自然言語で操作する連携アーキテクチャを構築した。

**Content Type**: Technical Reference

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:4/5 | Anti-Hype:4/5
**Main Journal**: 80/100 | **Annex Potential**: 80/100 | **Overall**: 80/100

**Topics**: [[AIエージェント, ドローン制御, シミュレーション, アーキテクチャ設計, 自然言語インターフェース]]

「AIに『荷物を届けて』と指示したら、ドローンが勝手に飛んで写真まで撮ってきた」――本稿は、この驚くべき体験を実現するAIエージェントと国産ドローンシミュレータ「箱庭ドローン」の連携アーキテクチャを詳解する。Webアプリケーションエンジニアにとって重要なのは、単なるデモ動画の面白さだけでなく、AIを物理世界（シミュレーション）と連携させるための具体的かつ実践的な設計思想だ。

筆者は、MCPサーバーを介してGeminiやClaudeのようなLLMベースのAIエージェントが自然言語で箱庭ドローンを操作するシステムを構築した。このシステムでは、AIエージェント（MCPClient）がMCPサーバーのRPCサーバーへ指示を送り、RPCサーバーがドローンシミュレータのAPIを呼び出すことで、ドローンのリアルタイムな動きとカメラやLiDARからの情報取得を実現している。

なぜこの仕組みが重要なのか。第一に、複雑な物理タスクを自然言語でAIに委譲する「エージェント型コーディング」の具体的な実装パターンを示している点だ。配送、写真撮影、障害物回避といった複数のステップを含む指示をAIが解釈し、シミュレータ上のドローンを自律的に動かす能力は、今後のアプリケーション開発におけるAI活用の大きな方向性を示唆する。第二に、MCPサーバーやRPCサーバーを通じて機能が明確に分離されているため、各コンポーネントの責務がはっきりしており、拡張性や保守性に優れたアーキテクチャとなっている。特にRPCサーバーを設けることで、AIエージェントとドローンシミュレータ間の疎結合が保たれ、異なるAIやシミュレータへの応用が容易になる。

「荷物配送＋証拠写真」という具体的なシナリオを通じて、AIが環境認識（Lidarスキャン）や目標達成（証拠写真撮影、指定位置への配置）を行う様子が示された。デモでのカメラ角度の調整不足といった「うまくいかない点」も開示されており、現実のシステム開発における試行錯誤のリアルさが伝わる。これは、AIを活用したシステム構築が単なる技術の統合にとどまらず、ユーザーからのフィードバックを受けて改善を重ねる開発プロセスそのものであることを物語っている。Webエンジニアは、このような具体的なアーキテクチャと実践例から、AIエージェントを活用した次世代のアプリケーション設計に不可欠な知見を得られるだろう。