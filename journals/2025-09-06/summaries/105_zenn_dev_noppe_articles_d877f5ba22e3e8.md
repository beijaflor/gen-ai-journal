## Mac miniとcodexで自動リファクタリングPRを量産する仕組み

https://zenn.dev/noppe/articles/d8775ba22e3e8

著者は、Mac miniとChatGPT PlusのCodex CLIを組み合わせることで、iOSアプリのリファクタリングPRを自動生成し、継続的なコード改善と品質向上を実現する仕組みを構築しました。

**Content Type**: ⚙️ Tools

**Scores**: Signal:5/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:5/5
**Main Journal**: 91/100 | **Annex Potential**: 90/100 | **Overall**: 92/100

**Topics**: [[自動リファクタリング, AIコーディングアシスタント, GitHub自動化, セルフホストランナー, フィードバックループ]]

この記事では、Mac miniを24時間稼働する自宅サーバーとし、ChatGPT PlusのCodex CLI、cron、GitHub CLIを組み合わせることで、iOSアプリ開発におけるリファクタリングPR（プルリクエスト）を自動生成する革新的な仕組みが紹介されています。cronで定期実行されるスクリプトが最新のリリースブランチを検出し、定義されたプロンプトに基づきCodex CLIを使ってコードの可読性を高めるリファクタリングを自動で提案し、GitHubにPRを作成します。特に注目すべきは、Mac miniをセルフホストランナーとして活用し、Swift特有のConcurrency関連のビルドエラーを自動で検知・検証する体制を整えている点です。

このシステムの最大の価値は、手動では時間のかかるリファクタリング作業を自動化し、開発者が本来集中すべき機能開発に時間を割けるようになる点にあります。PRの品質が低い場合は、深追いせずにクローズし、iPhoneのChatGPTアプリからCodexの学習データとなる`AGENTS.md`ファイルを直接更新することで、AIの精度を継続的に向上させるユニークなフィードバックループを確立しています。これにより、Codexは失敗から学習し、日々のリファクタリング提案の質を高めており、実際に1日2〜3件のPRがマージされることで、コードベースの継続的な改善と品質維持に貢献しています。

ウェブアプリケーションエンジニアにとって、このアプローチは単なるリファクタリングの自動化に留まらず、AIアシスタントを開発ワークフローに深く統合し、「失敗から学ぶ」自律的な改善システムを構築する具体的なヒントを提供します。自社プロジェクトの特性に合わせてAIの学習データを育て、自動化と手動フィードバックを組み合わせることで、開発効率とコード品質を同時に引き上げる実践的なモデルとなるでしょう。将来的にはCodex CloudのCLI対応により、さらにシンプルな構成での実現も期待されており、AIを活用した開発自動化の新たな可能性を示唆しています。