## 【エージェントルール】 中長期開発におけるルール設計

https://zenn.dev/sonicmoov/articles/0f9e98f3539d04

中長期的なAI開発プロジェクトにおいて、AIエージェントによるコード生成の品質と一貫性を高めるため、プロジェクト固有の「ルール設計」が不可欠であることを具体的なファイル構造と検証結果をもって解説します。

**Content Type**: Tutorial & Guide

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 88/100 | **Annex Potential**: 85/100 | **Overall**: 84/100

**Topics**: [[AIエージェントのルール設計, カスタムコンテキストファイル, 仕様駆動開発, AIコード生成の品質管理, 開発ワークフロー最適化]]

中長期的なAI活用開発では、GitHub CopilotなどのAIエージェントに単なるプロンプト以上のプロジェクト固有の知識を共有し、品質と一貫性を維持することが課題となります。本記事は、これを解決する「ルール設計」を提唱しており、カスタムコンテキストファイルとしてデザインパターン、フレームワーク、コーディング規約などをAIに自動的に読み込ませる重要性を強調します。

このルール設計は、指示の繰り返しを不要にし、生産性向上と高品質なコード生成をもたらします。中長期プロジェクトでの成功には、以下の4点が鍵となります。第一に、コード生成の不確定要素を減らす「仕様駆動」であること。第二に、実装前に「実装計画書」を作成し、ユーザーとの認識合わせを行うこと。第三に、AIが実装範囲を勝手に判断しないよう「実装範囲を明確化」すること。そして第四に、手動更新の手間を省くため「ルールファイルを自動更新」させる運用が不可欠です。

具体的なルールファイルの構成として、開発全体の流れを定義する`copilot-instructions.md`、プロジェクト固有のコーディング規約や採用技術を記す`general.instructions.md`（公式ドキュメントへのリンク推奨）、TypeScriptやVueといった特定技術の細かなルール（NG/OK例を含む）、セキュリティルールを記述する`security.instructions.md`（RAILGUARDフレームワークに準拠）、そしてAIがリライトする「実装計画書」を格納する`tasks`ディレクトリなどが提案されています。良いルールの書き方として、具体性、簡潔性（箇条書き）、参照先の明記（ドキュメントリンク）が挙げられます。

筆者の検証では、ルール設計を導入した環境は、既存コードや設計パターンへの準拠、および仕様の理解度と遵守において大幅な改善が見られました。特に、AIが勝手に仕様外の実装を行う「過剰な補完」を抑制できる点が重要です。結論として、中長期的なAI開発ではルール設計が不可欠であり、AIの精度向上にはコード自体のドキュメンテーションや可読性向上も併せて求められます。Repomixによるルール自動生成、Reconcilation Loopによる静的解析、RAILGUARDフレームワーク活用など、関連ツールや手法も紹介されています。