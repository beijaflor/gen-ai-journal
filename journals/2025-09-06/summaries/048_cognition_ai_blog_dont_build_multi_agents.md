## Don’t Build Multi-Agents

https://cognition.ai/blog/dont-build-multi-agents

Cognitionは、マルチエージェント型LLMアーキテクチャの脆さを指摘し、信頼性の高いエージェント構築のためのコンテキスト共有と単一スレッド型の重要性を提唱します。

**Content Type**: Opinion & Commentary

**Scores**: Signal:5/5 | Depth:5/5 | Unique:5/5 | Practical:5/5 | Anti-Hype:5/5
**Main Journal**: 100/100 | **Annex Potential**: 100/100 | **Overall**: 100/100

**Topics**: [[LLMエージェント, マルチエージェントアーキテクチャ, コンテキストエンジニアリング, 信頼性, エージェント開発]]

LLMエージェント開発において、Cognitionは既存のマルチエージェント型アーキテクチャに警鐘を鳴らし、より堅牢なシステム構築のための原則を提唱しています。OpenAIのSwarmやMicrosoftのAutoGenが推進するマルチエージェントは、サブエージェント間のコンテキスト不足や決定の不一致により、エラーが連鎖しやすく、信頼性に欠ける点が問題です。例えば、「Flappy Birdクローン」を開発する際、各サブエージェントが互いの作業内容やスタイルを把握できないため、最終的に整合性のないアセットが生成される可能性があります。

本稿では、この問題に対処するため二つの重要な原則が提示されています。一つ目は「コンテキストの共有」で、エージェントの各アクションが、システム全体で下された全ての関連する決定によって常に情報提供されるべきであり、単なる個別のメッセージだけでなく完全な実行トレースを共有することの重要性です。二つ目は「アクションが伴う暗黙の決定」に関するもので、コンテキスト不足による矛盾した決定は悪い結果を生むため、各エージェントが他のエージェントの意図や作業を把握する必要があるということです。

これらの原則に従う最もシンプルな方法は、**単一スレッドの線形エージェント**を利用することです。これによりコンテキストが連続的に保たれます。ただし、非常に長いタスクでコンテキストウィンドウの限界に直面する場合、履歴圧縮の技術が有効です。これは、専用のLLMを使って過去のアクションや会話を主要な詳細、イベント、決定に圧縮し、メインエージェントが重要なコンテキストを保持しつつ長時間タスクを継続できるようにするものです。Cognition自身もこのアプローチを採用し、小規模モデルのファインチューニングを通じて実現しています。

実例として、Claude Codeのサブエージェントが並列でコードを書かずに質問応答に限定されていることや、過去の「編集適用モデル」が大規模モデルの指示を小規模モデルが誤解しがちだった点が挙げられます。これらはすべて、コンテキスト共有の不足や決定の分散が引き起こす信頼性の問題を示唆しています。

記事は、2025年現在では、マルチエージェントのコラボレーションはシステムを脆くする結果に終わると結論付けています。将来的な可能性には期待しつつも、まずは単一スレッドのエージェントが人間とのコミュニケーション能力を向上させることで、より効果的な並列処理が実現されるとの見方を示しています。ウェブアプリケーション開発者にとっては、LLMエージェントを本番環境で運用する際に避けるべき落とし穴と、堅牢な設計のための具体的な指針となるでしょう。