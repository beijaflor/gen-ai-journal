## Claude Code GitHub Actionsを用いて不要になったコードを削除するPull Requestを自動生成する

https://zenn.dev/knowledgework/articles/e83c6af97c9fbd

株式会社ナレッジワークのSREが、Claude Code GitHub Actionsを活用し、不要になったTerraformの`moved`ブロックを定期的に自動削除し、レビュアー付きのPull Requestを生成するCIワークフローの実現を解説する。

**Content Type**: ⚙️ Tools

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 86/100 | **Annex Potential**: 84/100 | **Overall**: 84/100

**Topics**: [[GitHub Actions, AIコード生成, コード品質, Terraform, 開発ワークフロー自動化]]

株式会社ナレッジワークのSREが、AnthropicのClaude Code GitHub Actionsを用いて、不要になったTerraformの`moved`ブロックを自動的に検出・削除し、その変更をPull Requestとして提案するCIワークフローを構築した事例を紹介しています。

このアプローチが重要である理由は、一時的に必要だったコードがコードベースに残り続け、知らぬ間に技術的負債を増やしてしまうという、多くのウェブアプリケーション開発チームが抱える共通の課題を解決するからです。手動での削除は見落とされがちであり、関連するコメントやファイル削除まで含めると、自作スクリプトでの自動化は複雑化し、保守が困難になります。

このワークフローは、自然言語プロンプトでタスクを定義できるClaude Codeの柔軟性を活用し、非常に実用的な機能を実現しています。具体的には、`git blame`を使って各ブロックの最終更新日時を確認し、本番環境への反映ラグを考慮して30日以上経過したブロックのみを削除対象とします。さらに、周辺の関連コメントも削除し、削除後にファイルが空になった場合はファイル自体も削除します。これらの変更は、特定のレビュアー（SREチーム）をアサインしたPull Requestとして自動生成されるため、AIによる提案を人間が最終確認するという、安全かつ信頼性の高い運用モデルが確立されています。

ウェブアプリケーションエンジニアにとって、この事例は、AIをコード生成だけでなく、コードベースの保守と品質向上に活用する具体的な道筋を示しています。定期的な自動クリーンアップは、コードの可読性と保守性を向上させ、長期的な技術的負債を抑制します。また、AIの変更が必ず人間のレビュープロセスを経ることで、安心して開発ワークフローにAIを組み込むことができ、CI/CDの運用効率化とコード品質維持の両立を可能にする先進的な取り組みと言えるでしょう。