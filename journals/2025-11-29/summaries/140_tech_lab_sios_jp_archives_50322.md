## Claude Codeへの指示を少しでもさぼりたい！AskUserQuestionツール

https://tech-lab.sios.jp/archives/50322

Claude Codeにおける指示の自動化を試みるも、AskUserQuestionツールの現状の不安定性を指摘し、現実的な代替策を提示しています。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:3/5 | Depth:3/5 | Unique:4/5 | Practical:4/5 | Anti-Hype:5/5
**Main Journal**: 74/100 | **Annex Potential**: 76/100 | **Overall**: 76/100

**Topics**: [[Claude Code, AskUserQuestion, エージェント, スキル, プロンプト自動化]]

本記事は、Claude Codeの`AskUserQuestion`ツールを活用して、エージェントやスキルへの指示入力を自動化したいというエンジニアの欲求から生まれた実験について詳述しています。筆者は、選択肢形式で指示を分類・発火できるこのツールに注目し、ブログ作成エージェントなど複数のエージェントを効率的に利用できる可能性を探りました。

理想的な`AskUserQuestion`の動作としては、ユーザーに選択肢を提示し、その回答に基づいて処理を分岐させることで、対話的なタスク実行を円滑に進めることができます。しかし、筆者の調査と実践によれば、このツールは現状非常に不安定であると指摘しています。公式ドキュメントの不足、スキル内での初回呼び出し失敗、質問が表示されない、空の応答で処理が完了するといった既知の問題があり、GitHub上でも同様のイシューが多数報告されています。

このような現状を踏まえ、筆者は`AskUserQuestion`への過度な依存を避け、代替策として以下の方法を推奨しています。
1.  **`description`の活用**: スキルやエージェントの`description`に詳細な説明を記述する。
2.  **`CLAUDE.md`での制御**: `CLAUDE.md`ファイルに、特定のキーワード（例：「レビューして」「チェックして」）が入力された際に、どのスキルを発火させるべきかを明記する。

筆者は、自身のブログ記事レビュー用スキル「`review-article.md`」の実装例を通じて、キーワードトリガーと`CLAUDE.md`による制御が、不安定な`AskUserQuestion`の現実的なフォールバック戦略として有効であることを示しています。これにより、「この記事をレビューして」のような短い指示だけで、技術チェック、品質改善、SEO、タイトル生成といった複数のエージェントを適切な順序で実行できる理想的なワークフローを、安定的に実現できると主張しています。

結論として、筆者は`AskUserQuestion`の将来性に期待しつつも、現状では不安定なため依存すべきではないと忠告し、キーワードトリガーや`CLAUDE.md`を用いた堅実なプロンプト設計が重要であると強調しています。エンジニアの「さぼりたい」という探求心が、現状のギャップを埋めるための実用的な解決策に繋がるという、まさにエンジニアリングの原動力を示唆する内容です。