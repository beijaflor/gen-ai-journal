## Claude Codeをサンドボックス上で実行する(Mac編)

https://zenn.dev/todesking/articles/claude-code-with-sandbox-exec

macOS上でClaude Codeをサンドボックス環境で実行し、セキュリティと安全性を高める方法を解説する。

[[Claude Code, サンドボックス, macOS, セキュリティ, 開発環境]]

この記事は、macOS上でClaude Codeをサンドボックス環境で実行する方法を解説しています。著者は、非推奨ではあるものの、ChromiumやOpenAI Codex CLI、Google Gemini CLIといった主要な製品でも使用されている`sandbox-exec`コマンドを活用します。このサンドボックスの目的は、意図しないエラーを防ぐことであり、指定されたディレクトリ外への書き込み操作を禁止する緩やかなルールが設定されています。

記事では、プロジェクトディレクトリ、Claude Code関連ディレクトリ、一時ファイル、その他のツール関連ディレクトリへの書き込みを許��する`permissive-open.sb`ファイルの例が提供されています。サンドボックスの有効性を実証するために、サンドボックス化されたClaude Code内で`rm -rf ~/tmp`を実行しようとすると、「Operation not permitted」エラーが発生し、サンドボックスメカニズムが正しく機能していることが確認されます。著者は、書き込みエラーが発生した場合は必要に応じてルールを調整することを提案し、`sandbox-exec`がネットワークアクセスを制限してセキュリティを強化することも可能であると述べています。

---

**編集者ノート**: AIエージェントが開発ワークフローに深く統合されるにつれて、その「安全性」は極めて重要な課題となります。特に、AIがコードを生成したり、ファイルシステムを操作したりする際に、意図しない副作用やセキュリティリスクを最小限に抑えるためのサンドボックス化は不可欠です。この記事で紹介されている`sandbox-exec`の活用は、その具体的な実践例として非常に参考になります。今後は、AIエージェントがより自律的に動作するようになるにつれて、このようなサンドボックス技術や、AIの行動を制御・監視するメカニズムが、開発環境の標準機能として組み込まれると予測します。これにより、開発者はAIの能力を最大限に引き出しつつ、安心して開発を進められるようになるでしょう。