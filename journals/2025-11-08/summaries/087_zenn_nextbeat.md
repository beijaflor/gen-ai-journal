## Codex CLIに静的型付き関数型言語TreePを作らせてみた

https://zenn.dev/nextbeat/articles/819c2ace67e8ef

ネクストビート社の水島氏が、Codex CLIとClaude Codeを協調させることで、静的型付き関数型言語TreePをわずか3日間で開発し、最新のコーディングAIが複雑な言語処理系開発を効率的に支援する可能性を実証します。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:4/5 | Anti-Hype:4/5
**Main Journal**: 80/100 | **Annex Potential**: 80/100 | **Overall**: 80/100

**Topics**: [[プログラミング言語開発, 型推論, マクロシステム, LLM活用, AIコーディングアシスタント]]

ネクストビート社の水島氏が、Codex CLI（GPT-5世代）とClaude Code（Sonnet 4.5）を協調活用し、静的型付き関数型プログラミング言語「TreeP」をわずか3日間で開発した経験を共有しています。これは、AIが複雑な言語処理系の開発をいかに効率化できるかを示す好例です。

TreePは、Hindley-Milner型推論と抽象構文木（AST）ベースのマクロシステムを特徴とする関数型言語です。従来のLispのように構文木を意識しすぎず「具象構文は普通に見える」ことを重視しつつ、Lisp系のマクロ機能を実現するため、XMLライクな統一中間表現「EAST（Element AST）」を導入しています。EASTは、全てのノードが`Element(kind, name, attrs, children, span)`という共通構造を持つことで、マクロ展開をシンプルに記述可能にします。

開発は、まずCodex CLIに「Hindley-Milner型推論を持ち、LispのS式のようなメタ構文EASTを持つ言語」という大まかな指示を与えることから始まりました。Codex CLIはレキサー、パーサー、正規化、EAST変換、マクロ展開、型検査、インタプリタという王道パイプラインを提案・実装。特に型推論システムは、人間が実装するとバグりやすい複雑な部分ですが、AIはミスなくこなしたと述べられています。最終段階の調整やデバッグには、計画立案能力に優れるClaude Codeが活用され、両AIの長所を組み合わせることで開発が促進されました。

TreePは、型推論、衛生的マクロシステム、ブロック引数構文などを実装しており、特にブロック引数構文は`when(cond) { body }`のように自然な構文でマクロを呼び出せるようにする工夫が凝らされています。著者は、これらの機能を人間が単独で実装すれば1週間はかかるが、AIとのペアプログラミングにより3日で完成したことに驚きを表明しています。

この経験は、ウェブアプリケーションエンジニアにとって、最新のコーディングAIが単なるコード生成を超え、プログラミング言語設計のような高度で複雑なタスクにおいても、開発期間を大幅に短縮し、高品質な成果を生み出す可能性を示唆します。AIの活用により、「やりたかったが時間がなかった」プロジェクトへの挑戦が、これまで以上に現実的な選択肢となるでしょう。