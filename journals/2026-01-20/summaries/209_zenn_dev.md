## Claude Codeプラグイン「Rashomon」でプロンプト改善効果を可視化する

https://zenn.dev/shinpr_p/articles/d0e6b387558e97

Claude Code上でのプロンプト改善を自動化し、Git Worktreeを用いた並列実行によって変更の妥当性を定量的・定性的に可視化するプラグインを紹介する。

**Content Type**: ⚙️ Tools（ツール）
**Language**: ja

**Scores**: Signal:5/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 89/100 | **Annex Potential**: 87/100 | **Overall**: 88/100

**Topics**: [[Claude Code, プロンプトエンジニアリング, 開発自動化, Git Worktree, 生産性向上]]

著者は、Claude Codeでのプロンプトエンジニアリングにおける「修正によって何が変わったのかが分かりづらい」という課題を解決するため、改善効果を可視化するプラグイン「Rashomon」を開発・公開した。このツールは、単にプロンプトを最適化するだけでなく、最適化前後の実行結果を実環境で比較することで、開発者が「プロンプトの書き方による影響」を直感的に理解できるように設計されている。

Rashomonの核心的な仕組みは、Git Worktreeを利用した並列実行にある。ユーザーが入力したオリジナルのプロンプトに対し、ツールが8つの主要な問題パターン（ネガティブ指示の回避、構造化、不確実性の許容など）に基づいて最適化版を生成する。その後、完全に隔離された複数の環境で両方のプロンプトを並列実行し、所要時間、変更ファイル数、コードの変更内容をレポートとして提出する。これにより、プロンプトの微差が最終的な出力や実行効率にどのような影響を与えるかを、具体例を持って検証できる。

著者は、本ツールの重要性を示す例として「指示の落とし穴」を挙げている。例えば「エラーハンドリングを追加して」という単純な指示では、AIは必要性の有無に関わらずコードを追加しようとしてしまう。しかし、最適化されたプロンプトに「現状で十分な場合は変更しない」という判断基準（BP-008：不確実性の許容）を含めることで、AIは不要な作業をスキップし、結果として所要時間を大幅に短縮（例では120秒から45秒へ）し、コードの肥大化を防ぐことに成功している。

このツールが提供する価値は、単なるプロンプト作成の自動化に留まらない。実際の開発ワークフローの中で「なぜこの書き方が重要なのか」をフィードバックとして得られる教育的効果にあり、エンジニアがAIをより精密に制御するための「プロンプト力」を養うための強力な手段となる。AI駆動開発における試行錯誤のコストを下げ、意図しない挙動を制御したい開発者にとって、極めて実用性の高いツールであると筆者は主張している。