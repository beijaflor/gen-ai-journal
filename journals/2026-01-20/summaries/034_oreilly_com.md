## MCPサンプリング：ツールが自ら「思考」するための新たなアプローチ

https://www.oreilly.com/radar/mcp-sampling-when-your-tools-need-to-think/

**Original Title**: MCP Sampling: When Your Tools Need to Think

解説する：Model Context Protocol（MCP）の「サンプリング」機能を活用し、サーバー側で個別にLLMを管理することなく、クライアントのAI能力を再利用して高度な推論タスクを実行するアーキテクチャの優位性を。

**Content Type**: 🛠️ Technical Reference
**Language**: en

**Scores**: Signal:5/5 | Depth:4/5 | Unique:4/5 | Practical:4/5 | Anti-Hype:4/5
**Main Journal**: 84/100 | **Annex Potential**: 83/100 | **Overall**: 84/100

**Topics**: [[MCP, AIエージェント, LLMオーケストレーション, ソフトウェアアーキテクチャ, 開発ツール]]

Model Context Protocol（MCP）における「サンプリング（Sampling）」機能の活用により、AIツール（サーバー）がクライアント側のAI能力を直接利用して「思考」や「判断」を行う手法を解説している。従来、MCPサーバーはLLMから呼び出される受動的な関数として捉えられがちだが、サンプリングはこの関係を逆転させ、ツール側からLLMへプロンプトを投げる双方向の連携を実現する。

著者は、ツールにインテリジェンスを持たせる際の3つの選択肢（ロジックのハードコード、独自LLMの組み込み、サンプリングの利用）を比較し、サンプリングの優位性を強調している。特に、サーバー側で個別のAPIキーを管理する必要がなく、ユーザーが好みのモデル（Anthropic、OpenAI、あるいはローカルのLlama等）を自由に切り替えてもツールがそのまま動作し続ける「モデルの柔軟性」は、開発者とユーザー双方にとって大きなメリットとなる。

具体的な実装例として紹介されている「Council of Mine」は、サンプリングのポテンシャルを最大限に引き出した事例だ。このサーバーは、9人の中立的あるいは対立的なペルソナ（現実主義者、ビジョナリー、システム思考家など）をシミュレートし、特定のトピックについて議論・投票・要約を行う。驚くべきことに、サーバー内にはLLMの実体が存在せず、意見の生成、他者の意見の評価、最終的な合意形成といった全19ステップの推論プロセスが、すべてユーザー側のLLMへのサンプリング要求によって賄われている。

このアプローチは、要約や翻訳、感情分析、非構造化データの抽出といった「生成」や「判断」が伴うタスクにおいて極めて強力な武器となる。一方で、著者は注意点として、計算などの決定論的な処理や、各サンプリングによるラウンドトリップが発生するための遅延の許容、コスト管理についても言及している。Webアプリケーションエンジニアにとって、MCPサーバーを「データへの窓口」としてだけでなく、「AIの思考をオーケストレートする脳の一部」として再定義する、極めて示唆に富む内容となっている。