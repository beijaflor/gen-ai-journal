## LLM へのプロンプトを構造化された文書で管理する POML

https://azukiazusa.dev/blog/poml-prompt-structured-document/

Microsoftが提案するPOMLは、LLMプロンプトを構造化された文書として管理することで、複雑なAIエージェントの長大なシステムプロンプト設計を劇的に効率化します。

**Content Type**: ⚙️ Tools

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:5/5
**Main Journal**: 88/100 | **Annex Potential**: 87/100 | **Overall**: 88/100

**Topics**: [[POML, Prompt Engineering, AI Agent Development, System Prompts, Structured Documents]]

Microsoftが提案するプロンプトオーケストレーションマークアップ言語（POML）は、AIエージェント開発における長大なシステムプロンプト管理の課題を根本的に解決する新機軸です。従来のプレーンテキストや一部テンプレートエンジンでは、800行にも及ぶ複雑なプロンプトのモジュール分割、変更差分管理、再利用性が困難でした。POMLはこの課題に対し、HTMLに似たタグベースの構文で構造化された文書としてプロンプトを定義するアプローチを提供します。

開発者は、`<role>`や`<task>`といったセマンティックなコンポーネントを用いて役割やタスクを明確にし、`<img>`や`<table>`のような特殊要素で画像や表といった複雑なデータをプロンプトに統合できます。特に注目すべきは、動的なプロンプト生成を可能にするテンプレートエンジンです。`<let>`タグによる変数の定義、`for`属性によるループ、`if`属性による条件分岐により、状況に応じて柔軟に内容を変化させるプロンプトを構築できます。外部POMLファイルのインクルード機能は、プロンプトのモジュール化と再利用を促進し、メンテナンス性を大幅に向上させます。

また、`<meta>`タグを用いて、AIの応答形式を定義するレスポンススキーマ（JSON SchemaやZod形式）や、外部ツールのインターフェースを定義するツールスキーマ、ランタイムパラメーターを明示できる点が重要です。これにより、AIの出力を予測可能にし、ツール利用を正確に制御できます。VS Code拡張機能やTypeScript/Python SDKは、開発者が既存の環境でPOMLをシームレスにテスト・統合することを可能にし、開発ワークフローへのスムーズな組み込みを支援します。

POMLは、プロンプトエンジニアリングを「コード化された設定」として捉え、ウェブアプリケーション開発者が慣れ親しんだソフトウェアエンジニアリングの手法をAIプロンプト管理に適用することを可能にします。これにより、AIエージェントのパフォーマンス向上だけでなく、大規模なAIシステムにおけるプロンプトの品質、保守性、スケーラビリティが劇的に改善されるでしょう。複雑なAI機能を構築する上で、プロンプト管理の体系化は避けられない課題であり、POMLはその解決策として極めて実践的な価値を持ちます。