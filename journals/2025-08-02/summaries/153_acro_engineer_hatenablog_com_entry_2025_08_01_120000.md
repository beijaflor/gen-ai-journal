## Amazon S3 Vectors によるRAGの性能／精度を評価してみた

https://acro-engineer.hatenablog.com/entry/2025/08/01/120000

評価は、Amazon S3 VectorsがRAG向けベクトルストアとして、既存サービスと比較して低コストながら、特定の検索シナリオでは精度に限界があることを明らかにした。

**Content Type**: ⚙️ Tools

**Scores**: Signal:4/5 | Depth:4/5 | Unique:3/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 81/100 | **Annex Potential**: 77/100 | **Overall**: 80/100

**Topics**: [[RAG, ベクトルデータベース, AWS S3 Vectors, ハイブリッド検索, コスト最適化]]

本記事は、AWS Summit 2025 New Yorkで発表されたAmazon S3 Vectorsを、RAG（Retrieval-Augmented Generation）におけるベクトルストアとして詳細に評価し、他の既存サービスと比較しています。S3 Vectorsの最大の利点は、OpenSearch ServerlessやAuroraなどの既存サービスと異なり、データ量とAPIリクエスト量に応じたコストのみで運用できるため、試算では月額$2.06と、他サービスの数十分の1から数百分の一という圧倒的な低コストが示されています。

一方で、機能面ではいくつかの制限があります。メタデータフィルタリングは完全一致や範囲検索に限定され、柔軟な部分一致検索はできません。チャンクサイズは最大500トークンという制限があり、Bedrock KnowledgeBaseと連携して階層チャンキングを利用する場合は、特定のメタデータをフィルタリング不可として設定するワークアラウンドが必要です。また、S3 Vectorsはベクトル検索のみに対応しており、ハイブリッド検索は利用できません。

速度面では、OpenSearch Serverless（ベクトル検索のみ）と比較して平均で約0.2秒、最大で約1秒遅いものの、多くのRAGユースケースで許容できる1秒未満の応答速度を実現しています。精度面では、ベクトル検索のみの場合、OpenSearch Serverlessと同等の高い精度を示します。しかし、製品IDのようなキーワードを含む質問でハイブリッド検索（OpenSearch Serverless）とS3 Vectors（ベクトル検索のみ）を比較すると、ハイブリッド検索が圧倒的に優位でした。これは、S3 Vectorsがキーワードを含む質問に対するIDベースの正確な検索に不向きであることを示唆しています。

この評価から、ウェブアプリケーションエンジニアにとってS3 Vectorsは、コストを大幅に削減できる魅力的な選択肢であるものの、特定の検索要件（例：厳密なキーワードやIDの一致）を持つRAGシステムでは、ハイブリッド検索の不足が課題となる可能性があると理解すべきです。主に意味的類似度に基づく検索が中心であればS3 Vectorsは有力ですが、キーワードベースの精密な検索が求められる場合は、OpenSearch Serverlessのようなハイブリッド検索対応サービスを検討する必要があるでしょう。リトライ処理やインデックス分割、IAMを用いたアクセス制御などのベストプラクティスは、実運用で活用できます。