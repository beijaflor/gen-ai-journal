## Formal specs as sets of behaviors

https://surfingcomplexity.blog/2025/07/26/formal-specs-as-sets-of-behaviors/

形式仕様は、命令の羅列であるプログラムとは異なり、システムが取りうる「振る舞いの集合」であるという根本的な概念を明確に提示する。

**Content Type**: Technical Reference

**Scores**: Signal:5/5 | Depth:5/5 | Unique:4/5 | Practical:4/5 | Anti-Hype:5/5
**Main Journal**: 92/100 | **Annex Potential**: 90/100 | **Overall**: 92/100

**Topics**: [[形式仕様, リアクティブシステム, システム設計, 動作検証, 分散システム]]

この記事は、形式仕様が「命令の羅列」であるプログラムとは根本的に異なる、「振る舞いの集合」であるという重要な概念を、ウェブアプリケーションエンジニア向けに分かりやすく解説しています。一般にソフトウェアは、単一入出力で完結する「変換型」と、継続的に外部と相互作用する「リアクティブ型」に大別されますが、サービスや分散システムといった後者においては、形式仕様の適用が極めて有効です。

著者は、「振る舞い」をシステムの入力と出力のシーケンス（実行履歴）と定義し、形式仕様とは、与えられた振る舞いが正しいかどうかを判定する「正しさの検証器」として機能すると説明します。これは、実質的にすべての正しい振る舞いを含む集合として仕様を捉える思考法です。無限に続く振る舞いや無限の数の正しい振る舞いを明示的に列挙できないため、TLA+のような形式仕様言語は、初期状態（Init）と次の状態への遷移（Next）を記述することで、これらの無限集合を「生成」する形で定義します。

特に重要なのは、形式仕様における「非決定性」の解釈が、プログラミングにおけるそれと異なる点です。プログラムではランダム性や競合状態を指すことが多い非決定性が、形式仕様ではシステムが取りうる「すべての有効な拡張パス」（外部からの入力も含む）を指します。この視点の違いを理解することは、複雑なリアクティブシステムの設計や検証において、予期せぬ挙動を特定し、デバッグの際に根本原因を深く掘り下げるための「考え方のシフト」をもたらします。最終的に、仕様の「正しさ」を検証する「プロパティ」もまた振る舞いの集合として捉えることで、開発者はシステムが持つべき特性を厳密にチェックし、実装前の段階で潜在的なバグを発見できるため、品質向上と手戻り削減に貢献します。