## CursorでCloudFormationテンプレートを標準化してみた #AWS

https://qiita.com/akira2_ito/items/90b6bf463c98608ddc49

開発チームがCursorのAIエージェント機能を活用し、CloudFormationテンプレートの命名規則やファイル構成などの開発標準を自動的に適用する仕組みを構築し、IaC品質の向上とレビュー工数の削減を実現しました。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:4/5 | Depth:3/5 | Unique:4/5 | Practical:4/5 | Anti-Hype:4/5
**Main Journal**: 76/100 | **Annex Potential**: 76/100 | **Overall**: 76/100

**Topics**: [[CloudFormation, IaC, AIコードエディタ, Cursor, 開発標準]]

著者のチームではAWSのIaCツールとしてCloudFormation（CFn）を利用していますが、テンプレートの開発標準が定まっておらず、リソースの命名規則やファイル構成のばらつきがレビューの困難さにつながっていました。開発標準を策定しても、その普及や遵守には多大な労力が必要です。そこで、AIコードエディタCursorのAIエージェント機能を活用し、開発者が意識することなく標準に準拠したCFnテンプレートを作成できる仕組みを構築しました。

本記事では、AIエージェントが従うルールを事前に定義できる「Project Rules」と、AIエージェントへの命令セットをコマンドで呼び出せる「カスタムコマンド」というCursorの機能が利用されています。これらはMarkdown形式で記述し、作業フォルダに配置するだけで簡単に導入できる特徴があります。

具体的な活用方法として、Project Rulesは新規のCFnテンプレート作成や修正時に標準化を適用するために使用され、カスタムコマンド（例: `/sc`）は既存テンプレートの一括標準化に利用されました。定義されたルールには、以下の点が挙げられます。

*   **リソース命名規則の統一**: 全体ルール（例: `[リソースタイプ]-[システム名]-[環境名]`）と、S3などのサービス別の個別ルールを設定し、網羅性と柔軟性を両立。
*   **Metadata作成の強制**: CFnテンプレート内の定義情報を一覧化するMetadataの作成を義務付け、テンプレートの視認性と理解度を向上。
*   **`cfn-lint`による静的エラーチェックの強制**: AWS CloudFormation Linterを自動で呼び出すことで、構文チェックやAWSのベストプラクティスに基づいた構成上の警告を適用し、テンプレート品質を担保。
*   その他: 1サービス1ファイルの原則、英語でのコメント記述、インデントのルール化も実施され、最終的に187行に及ぶ詳細なルールセットが作成されました。

この仕組みの導入により、レビューのしやすさが向上し、命名規則やファイル構成の一貫性が確保されました。特に、AIによる的確なコメント付与や`cfn-lint`によるエラーチェックは、テンプレートの品質保証において大きな恩恵をもたらしたと筆者は述べています。一方で、課題も認識されており、ルールがまだ未成熟である点、ルールの肥大化によるAIのコンテキスト上限到達や動作の重さ、そして実際のプロジェクトでのAI活用に対する顧客の不安が挙げられます。著者は、開発標準ドキュメントは別途作成し、Cursorはその実現を補助するツールとして提案していく考えを示しています。

このアプローチは、IaCの品質管理と開発効率向上を目指すWebアプリケーションエンジニアにとって、AIエディタの具体的な活用例として非常に示唆に富んでいます。