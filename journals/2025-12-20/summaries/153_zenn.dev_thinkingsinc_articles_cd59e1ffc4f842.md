## GitHub Copilotにおける Agent / Instructions / Prompt の整理と活用方法

https://zenn.dev/thinkingsinc/articles/cd59e1ffc4f842

GitHub CopilotのAgent、Instructions、Prompt機能を整理し、具体的な活用方法を解説することで、より効果的なコーディング支援を引き出す方法を提示する。

**Content Type**: Tools
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:3/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 81/100 | **Annex Potential**: 77/100 | **Overall**: 80/100

**Topics**: [[GitHub Copilot, AI Agent Design, Prompt Engineering Best Practices, Developer Workflow Automation, Code Review Automation]]

この記事は、GitHub Copilotを最大限に活用するために不可欠な「Agent」「Instructions」「Prompt」という3つのファイルタイプについて、その概念と具体的な活用方法を詳細に解説します。著者は、これらの機能を適切に設定することで、Copilotを単なるコード補完ツールではなく、開発プロセス全体を支援する強力な「チームメンバー」として機能させられると主張しています。

「Agent (`*.agent.md`)」は、特定の役割や専門知識を持つカスタムAIエージェントを定義する機能です。これにより、フロントエンド、バックエンド、インフラなどの領域に特化したAIを準備でき、コンテキスト汚染を回避しながら高精度の回答を引き出すことが可能になります。この専門化により、開発効率と品質向上に大きく貢献し、AIの振る舞いを統一し、使用ツールの最適化も図れます。

「Instructions (`*.instructions.md`)」は、AIが遵守すべき永続的なルールや制約をプロジェクト全体、または特定のファイル群に適用する機能です。例えば、「チャットの返答は日本語で」「コードコメントは英語で」といった共通ルールを定義することで、AIの出力品質を均一化し、開発者間の認識のズレを防ぎます。また、毎回プロンプトで指示する手間を省き、より本質的なタスクに集中できるようになる点が重要です。`applyTo`プロパティによる適用範囲制御が肝要であり、VS Code Chatでファイル参照 (`#`) を使うことで、意図したコンテキストでルールが確実に読み込まれるようにする必要があります。

「Prompt (`*.prompt.md`)」は、頻繁に行うタスクをテンプレート化し、再利用可能にする機能です。これにより、「単体テスト生成」や「リファクタリング」といった定型作業の品質を均一化し、必要な情報の入力漏れを防ぎ、作業効率を大幅に向上させます。特に、対話的なステップ定義を用いることで、複雑なタスクでもAIと協調しながら、必要な情報を段階的に収集し、確実な実行を可能にする点が強調されています。

さらに、GitHub Copilotのプルリクエスト自動レビュー機能におけるInstructionsの活用にも触れており、`.github/copilot-instructions.md`を通じてプロジェクト固有のレビュー基準を自動適用できる利点を指摘します。ただし、このファイルに強い役割定義を直接記述すると、日常のVS Code Chatでの使い勝手を損なう可能性があるため、レビューの詳細なガイドラインは別ファイルに切り出し、条件付きで参照する運用が推奨されると解説しています。

最後に、新たに導入された実験的な「サブエージェント」機能についても言及されています。これは、上位エージェントが専門化された子エージェントに処理を委譲することで、複雑なタスクを分割し、全体の精度と効率を高める可能性を秘めています。しかし、上位エージェントが受け取れるのは子エージェントの最終出力のみであり、中間プロセスを直接参照できないため、成果物を別ファイルに保存するなど、設計段階での工夫が不可欠であると著者は強調しています。

これらのAgent、Instructions、Prompt、そしてサブエージェントといった機能を戦略的に活用し、それぞれの役割、ルール、タスクを明確に整理することが、GitHub Copilotを開発ワークフローにおいて不可欠で強力な支援ツールへと昇華させる鍵であると著者は結論付けています。