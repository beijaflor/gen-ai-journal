## AI活用を安定させる型「Diff-in / Merge-out」~翻訳タスクで学ぶ責務の分離~

https://tech.layerx.co.jp/entry/2025/12/17/141748

LayerXのエンジニアは、AI利用時の精度低下やファイル破損といった課題を解決するため、AIには差分入力（Diff-in）のみをさせ、マージと構文チェックをツールに任せる（Merge-out）「Diff-in / Merge-out」パターンと、手続き的知識をClaude Code Skillとしてパッケージ化する手法を提唱します。

**Content Type**: Tutorial & Guide
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 88/100 | **Annex Potential**: 85/100 | **Overall**: 84/100

**Topics**: [[AI活用パターン, 責務分離, i18n, Claude Code Skill, 開発ワークフロー改善]]

この記事は、LayerXのエンジニアが、AIを安定して活用するための「Diff-in / Merge-out」という設計パターンを、多言語対応（i18n）タスクを例に解説しています。著者は、AI開発ツールが進化する一方で、AIの失敗しやすいポイントを運用設計で潰すことが重要であると指摘します。特にi18nのような「育ち続ける巨大ファイル」の更新では、AIに全量を読み込ませるとコンテキストが圧迫され精度が低下し、JSON/YAMLなどの構造ファイルをAIが直接編集することで構文破壊が頻繁に発生し、さらに手順が属人化するといった課題が生じると述べます。

これらの課題に対し、著者は「Diff-in / Merge-out」パターンを提案します。Diff-inでは、AIに既存の巨大な全量ファイルを読ませず、不足している部分だけを抽出した小さな差分ファイルを入力として与え、その差分のみを埋めさせることで、AIのコンテキスト圧迫を防ぎ、精度を向上させます。Merge-outでは、AIが生成した差分内容を元のファイルに反映するプロセスをCLIツールやスクリプトに任せることで、JSON構文の破壊を防ぎ、ツールの厳密なチェックにより整合性を担保します。これにより、AIは生成（翻訳）に集中し、構造ファイルの整合性はツールが保証するという責務の分離が実現されます。

さらに、この差分運用をチーム内で定着させるため、著者は多言語対応の手順そのものをClaude CodeのSkill（SKILL.md）としてプロジェクトに埋め込むことを推奨しています。これにより、手順が属人化せず、必要なときにエージェントが動的にSkillをロードして利用するため、コンテキストの汚染を防ぎつつ、常に"正しい手順"をチーム全体で共有できるようになります。Web/BackendエンジニアがFlutterの翻訳手順を知らなくても、実装依頼の流れの中でi18nまでスムーズに回せる状態を目指します。このパターンは、翻訳タスクだけでなく、設定ファイル、スキーマ、ドキュメント更新など、「大きいファイルを安全に更新したい」様々な場面に応用可能であり、AIとツールをうまく分業することでAIのアウトプットを最大化し、開発プロセスの安定化と属人性の排除に貢献すると結んでいます。