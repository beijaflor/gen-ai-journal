## マイクロサービスアーキテクチャにおけるMastraを活用したAI基盤設計

https://tech.plaid.co.jp/microservice-ai-system-with-mastra-en

**Original Title**: Designing an AI Foundation with Mastra in a Microservices Architecture

PLAID社は、KARTE製品のAIネイティブ化を目指し、マイクロサービスアーキテクチャ環境下でMastraフレームワークを活用したAI基盤を構築しました。

**Content Type**: Tools
**Language**: en

**Scores**: Signal:5/5 | Depth:4/5 | Unique:4/5 | Practical:4/5 | Anti-Hype:4/5
**Main Journal**: 84/100 | **Annex Potential**: 83/100 | **Overall**: 84/100

**Topics**: [[マイクロサービスアーキテクチャ, AIエージェント開発, Mastraフレームワーク, AIシステム設計, 開発者体験]]

PLAID社は、KARTE製品のAIネイティブ化を推進する「KARTE AIプロジェクト」を発足させました。このプロジェクトは、AI機能のリリースだけでなく、AI開発を主導できる人材の育成と、マイクロサービスアーキテクチャにおけるAI機能構築設計の確立を二大目標としています。特に、AI開発スキルを組織全体に普及させるため、専門チームを設けるのではなく、プロダクトエンジニアとプラットフォームエンジニアが連携する「デュアルアサインメントモデル」を採用。プラットフォームエンジニアがAI開発環境の整備、学習の集約、フレームワークの改善を主導しました。

AIシステムのアーキテクチャ設計においては、AIエージェント開発スキルが全チームに浸透していない現状と、将来的なクロスプロダクトでのマルチエージェント連携を見据え、AIコードを単一のマイクロサービスに集約する「中央集権型」モデルを選択しました。これにより、知識の集中化と、複雑なマルチエージェント連携の容易性を重視しています。ツール実行場所については、当初、認証・認可が必要なKARTEデータへのアクセスなどを考慮し、フロントエンドで実行するクライアントツールを多用しましたが、クライアントライブラリ依存や冗長なWeb APIの問題から、最終的にフロントエンドからMastraサーバーへ直接リクエストする方式へ移行し、開発体験の向上を図りました。

AIフレームワークとしてはTypeScriptネイティブであり、活発な開発と充実したドキュメントが魅力のMastraを採用。MastraはVercel AI SDKの上にMemory（会話履歴管理）やEvals（評価）といった高度な機能を追加提供します。特に、チャット履歴管理におけるリソース・スレッド管理、トークン制限を行うプロセッサ、セマンティックリコールといったMemory機能や、複雑なマルチエージェント構成でLLMの出力をストリーム配信できるMastraストリーミングは、自社開発が困難な高度な機能であり、Mastraの活用がプロジェクトに大きな利点をもたらしました。今後は、AI開発スキルの組織全体への浸透に伴い、段階的な分散化も視野に入れています。