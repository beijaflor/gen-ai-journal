## Copilotコードレビューの全能力を解き放つ：インストラクションファイルをマスターする

https://github.blog/ai-and-ml/unlocking-the-full-power-of-copilot-code-review-master-your-instructions-files/

**Original Title**: Unlocking the full power of Copilot code review: Master your instructions files

GitHub Copilotコードレビューの振る舞いを効果的にカスタマイズするためのインストラクションファイルの書き方と活用法を解説する。

**Content Type**: ⚙️ Tools
**Language**: en

**Scores**: Signal:5/5 | Depth:4/5 | Unique:3/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 85/100 | **Annex Potential**: 80/100 | **Overall**: 84/100

**Topics**: [[GitHub Copilot, コードレビュー, AIツール, 開発ワークフロー, 指示ファイル]]

GitHub Copilot Code Review (CCR) は、コードレビューを自動化し、チームの標準に準拠させるための強力なツールですが、その挙動を最大限に活用するには、`copilot-instructions.md` およびパス固有の`*.instructions.md` ファイルを適切に記述することが重要です。この記事では、これらのインストラクションファイルを効果的に作成し、活用するための実用的なヒント、例、ベストプラクティスをGitHubが提供しています。

インストラクションファイルは、Copilot Code Reviewの挙動をカスタマイズし、特定のワークフローに適合させる柔軟性を提供します。これにより、Copilotに明確で実用的なルールを与え、効果的かつ一貫性のあるレビューを導くことが可能になります。著者は、効果的なインストラクションファイルの作成は、Copilotの現在の能力を理解し、その制約内でガイドする方法を学ぶことが鍵であると強調しています。

推奨される一般的なヒントとしては、以下が挙げられます。
*   **簡潔に保つ**: Copilotは集中した短い指示に最も効果的に反応します。最初は小さく始め、反復的に改善することが推奨されます。
*   **構造を重視する**: 見出しや箇条書きを使用して情報を整理し、Copilotが処理しやすいようにします。
*   **直接的な表現を使う**: 長い段落よりも、短く命令的なルールの方が効果的です。
*   **例を示す**: チームメイトに示すように、サンプルコードや説明でコンセプトを具体的に示します。

リポジトリ全体に適用される`copilot-instructions.md`ファイルに加えて、`.github/instructions`ディレクトリ内のパス固有の`*.instructions.md`ファイルでは、`applyTo`フロントマターを使用して特定の言語（例: `**/*.ts`）やパスにルールを適用できます。また、`excludeAgent`フロントマターを使って特定のCopilotエージェントがファイルを読み込まないようにすることも可能です。これにより、セキュリティ、言語固有のガイドラインといった異なるトピックごとにルールを整理できます。

一方、Copilot Code Reviewがサポートしていない指示も存在します。
*   CopilotコメントのUXやフォーマット（フォント、サイズなど）の変更。
*   「Pull Request Overview」コメントの変更。
*   コードレビュー以外のタスク（PRのマージブロックなど）の実行要求。
*   外部リンクの記述（Copilotはリンクを辿らないため、関連情報はファイル内にコピーすべき）。
*   「より正確に」や「すべての問題を特定する」といった一般的で不明確な指示（Copilotは既にそのようにチューニングされているため、ノイズとなる）。

記事では、インストラクションファイルの具体的な推奨構造（タイトル、目的と範囲、命名規則、コードスタイル、エラー処理、テスト、セキュリティ、コード例など）も提供されており、TypeScriptの例とともに詳細が示されています。既存のインストラクションファイルを改善する際には、Copilot Coding Agentにファイルのレビューと改訂を依頼するプロンプトも紹介されており、開発者が効率的に指示ファイルを最適化できる方法が示唆されています。これらのガイドラインを適用することで、開発者はCopilot Code Reviewの潜在能力を最大限に引き出し、開発ワークフローを向上させることが可能となります。