## Claude Codeとの会話を自動でObsidianに記録する仕組みを作った

https://zenn.dev/pepabo/articles/ffb79b5279f6ee

Claude Codeでの会話ログをリアルタイムでObsidianに同期し、AIとの対話から得られた知見を永続的な資産に変える。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:5/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 89/100 | **Annex Potential**: 87/100 | **Overall**: 88/100

**Topics**: [[Claude Code, Obsidian, ワークフロー自動化, ナレッジマネジメント, CLIツール]]

Claude Code（AnthropicのCLIツール）を用いた開発において、セッションの終了とともに消失してしまう会話ログを、個人のナレッジベースであるObsidianへリアルタイムに自動記録する仕組みを構築・公開している。

技術的な実装の肝は、Claude Codeが内部的に保持するセッションデータ（`~/.claude/projects/*/session.jsonl`）の挙動をハックすることにある。著者は、このJSONL形式のログを5秒間隔で監視するBashスクリプトを作成。`jq`を活用して、`<system-reminder>`や`<local-command>`、`<task-notification>`といったノイズとなるシステムメッセージを精緻に除去し、純粋なユーザーとアシスタントの対話のみを抽出している。抽出されたテキストは、日付をタイトルに冠したMarkdownファイルとしてObsidianのディレクトリに追記される。

著者は、この仕組みの重要性を「エンジニアの知的生産における摩擦の解消」にあると説いている。セッション終了後に有益な情報を手動でコピー＆ペーストする作業は心理的・時間的な障壁となり、結果として貴重な知見が埋没してしまう。これを自動化し、作業中に意識することなくナレッジが蓄積される状態を作ることで、AIとの対話を「一時的な消費」から「永続的な資産」へと変換できると主張している。

システムの信頼性を高める工夫として、ファイルの「追記モード」の採用が挙げられる。セッションファイルの既読行数を管理することで、プロセスのクラッシュや競合を防ぎつつ、安定した同期を実現している。また、macOSのLaunchAgentによる常駐化とGitへの自動コミットを組み合わせることで、マルチデバイス環境でも即座に検索可能な状態で知見が統合される。著者は、この自動化が「人類のアウトプットを増やす」というミッションに直結する、エンジニアにとって不可欠なツールチェーンの一部になると位置づけている。