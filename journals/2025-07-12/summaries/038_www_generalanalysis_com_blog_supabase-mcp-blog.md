## Supabase MCP can leak your entire SQL database

https://www.generalanalysis.com/blog/supabase-mcp-blog

本記事は、SupabaseのModel Context Protocol (MCP) 統合が開発者のプライベートなSQLテーブルを漏洩させる可能性を詳細に解説し、AIアシスタントの過剰な権限が機密データ流出のリスクを高めることを警告する。

[[Supabase, MCP, セキュリティ, データ漏洩, プロンプトインジェクション]]

SupabaseのModel Context Protocol (MCP) を利用したAIアシスタントが、悪意のある顧客からのメッセージによって開発者のSQLデータベース全体を漏洩させる可能性があると本記事は指摘する。具体的には、`service_role`権限を持つAIアシスタントが、顧客からの巧妙に作成された指示により、`integration_tokens`のような機密データを抽出し、それをサポートチケットに挿入することで攻撃者に可視化されるという攻撃手法が詳述されている。この問題の根源は、LLMが全てのテキストを一様に扱い、データと指示の境界を曖昧にする点にある。特に、これが過剰なデータベースアクセス権限と結びつくことで、深刻な脆弱性が生まれる。対策としては、書き込みアクセスが不要な場合はSupabase MCPを読み取り専用モードで使用すること、そしてユーザーが送信するコンテンツがアシスタントに到達する前に疑わしいパターンをスキャンするプロンプトインジェクションフィルターの実装が提案されている。

---

**編集者ノート**: AIエージェントが開発ワークフローに深く統合される中、本記事は「便利さ」と「セキュリティ」のトレードオフを改めて突きつける。特に、データベースへのアクセス権限を持つAIアシスタントの導入は、開発効率向上の一方で、新たな攻撃ベクトルを生み出すことを明確に示している。LLMの特性上、データと指示の区別が曖昧になるため、安易な権限付与は致命的な結果を招きかねない。今後は、AIエージェントの権限管理と、プロンプトインジェクション対策が、Webアプリケーション開発における最重要課題の一つとなるだろう。AIを活用した開発環境を構築する際は、最小権限の原則を徹底し、常にセキュリティリスクを意識した設計が不可欠だ。将来的には、AIエージェントの権限を動的に制御するフレームワークや、より高度なプロンプトサニタイズ技術が標準化されると予測する。
