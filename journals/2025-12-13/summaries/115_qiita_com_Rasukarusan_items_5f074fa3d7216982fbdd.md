## AI時代の"引用経済"をつくる！Next.jsで試す HTTP 402

https://qiita.com/Rasukarusan/items/5f074fa3d7216982fbdd

AIによるWebコンテンツの「搾取」に対抗し、HTTP 402とブロックチェーン決済を活用した新たな「引用経済」の実現可能性をNext.jsでの実装を通じて提示します。

**Content Type**: Tutorial & Guide
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:4/5 | Anti-Hype:4/5
**Main Journal**: 80/100 | **Annex Potential**: 80/100 | **Overall**: 80/100

**Topics**: [[HTTP 402, AI時代の引用経済, Next.js, ブロックチェーン決済, Webコンテンツ収益化]]

筆者は、AIによる検索が主流となり、Webコンテンツの引用元への広告収益が還元されない現状に警鐘を鳴らし、コンテンツ提供者への適切な対価支払いを可能にする「引用経済」の必要性を訴えます。その解決策として、長年予約済みであったHTTPステータスコード402 (Payment Required) の再活用を提案しています。

記事では、AIがWeb経済の主要プレイヤーとなり、暗号資産やウォレット技術の進化によってAIが「財布」を持てるようになった現代において、HTTP 402がようやく実用的な意味を持つようになったと指摘します。その仕組みはシンプルで、リクエストヘッダーに決済トークンがない場合に402を返し、支払い要求（通貨、チェーン、金額、受取人アドレスなど）を提示するというものです。これにより、AIエージェントは自動でウォレットから支払いを行い、コンテンツにアクセスできるようになります。

具体的な実装として、Next.jsを用いたサンプルが紹介されています。保護対象となるコンテンツページ `/protected_content` を用意し、ミドルウェアとして機能する `proxy.ts` で `x-payment` ヘッダーの有無を検証。ヘッダーがない場合は402ステータスと決済パラメータを含むJSONを返します。クライアント側では、Coinbase社が提供する `x402-next` ライブラリを利用して支払い手段を実装します。このライブラリは、ウォレット接続UIの表示から支払い完了後の署名付きJWT（トークン）の取得、そしてそのトークンを `x-payment` ヘッダーとしてリクエストに付与するまでの一連のフローを自動化します。人間がブラウザでアクセスすればウォレット選択画面が表示され、AIエージェントがアクセスする場合は返却されるJSONの決済パラメータを基に自動で支払い処理を実行する設計です。

現在、HTTP 402の標準化は進行中であり、Coinbase社やCloudflare社が取り組みを主導しています。著者は、標準化が広まれば、コンテンツクリエイターは広告に依存しない新たな収益モデルを確立し、AIに引用されることで自動的に収益を得られる未来が実現すると期待を表明しています。これは、AI時代におけるWebコンテンツの価値を再定義し、公平なエコシステムを築くための重要な一歩となると強調しています。