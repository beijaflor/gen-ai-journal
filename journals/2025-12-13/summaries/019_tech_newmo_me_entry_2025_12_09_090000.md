## 生成AIの入出力品質は「フォーマット」で決まる ― 中間表現とテンプレートの組み合わせ

https://tech.newmo.me/entry/2025/12/09/090000

生成AIの出力品質を安定させるため、中間表現（IR）と出力テンプレートを組み合わせた段階的変換パイプラインの導入が、テストケース生成の精度と網羅性を劇的に向上させることを実証します。

**Content Type**: Tutorial & Guide
**Language**: ja

**Scores**: Signal:4/5 | Depth:5/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:5/5
**Main Journal**: 94/100 | **Annex Potential**: 92/100 | **Overall**: 92/100

**Topics**: [[生成AI, 中間表現, テストケース生成, 出力テンプレート, 開発ワークフロー]]

この記事は、生成AIが自然言語の仕様書（PRD/PDD）から直接成果物（例：テストケース）を生成する際に生じる「入力理解の不十分さ」や「出力フォーマットのばらつき」といった課題に対し、中間表現（IR）と出力テンプレートを組み合わせた効果的な解決策を提示しています。

著者は、コンパイラが高級言語を中間表現に変換するように、生成AIにおいても「UseCase IR」と「Test Plan IR」という二段階の中間表現を導入するアプローチを紹介しています。UseCase IRで仕様の構造化を強制し、Test Plan IRでテスト戦略を設計することで、AIが仕様を読み飛ばしたり、重要な制約を見落としたりする問題を根本から解決します。具体的には、UseCase IRのスキーマで必須フィールドを定義することで、AIが必要な情報を漏れなく抽出するよう誘導します。さらに、最終成果物には出力テンプレートを適用し、毎回一貫したフォーマットでドキュメントが生成されるようにします。

このパイプラインの導入により、テストケースのカバレッジが+171%向上し、バリデーション、境界値、代替フローといった重要なテスト項目における漏れがゼロになったと報告されています。また、Test Plan IRを挟むことで、単なる機械的な1:1マッピングではなく、境界値の自動追加や優先度分類など、よりインテリジェントなテスト設計が可能になることが強調されています。

UseCase IRは、仕様の構造化された抽象表現として、テストケース生成だけでなく、E2Eテスト、APIスキーマ、UIコンポーネント、ビジネスロジックなど、様々な用途で再利用可能であることも重要なポイントです。これにより、重複作業の削減、認識のずれ防止、仕様変更時の追跡容易化といったメリットが生まれます。

結論として、生成AIに自由な形式で出力させるのではなく、構造化されたフォーマット（IRスキーマと出力テンプレート）で「何を抽出するか」「どう出力するか」を強制することが、入出力品質を安定させ、開発プロセスの効率と信頼性を高める鍵であると筆者は主張しています。これは、webアプリケーションエンジニアがAIを開発ワークフローに統合する上で直面する具体的な課題に対し、実践的かつ具体的な解決策を提供するものです。