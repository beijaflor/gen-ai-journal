## 新卒エンジニアが Claude Code にコントリビュートした話 - Docker DNS問題を解決できた🎊

https://zenn.dev/gmomedia/articles/e42848e951a581

新卒エンジニアが、AIコーディングツール「Claude Code」のDocker環境で発生したDNS問題を低レイヤーのネットワーク知識と徹底した検証で解決し、その修正を公式リポジトリへコントリビュートしました。

**Content Type**: ⚙️ Tools
**Scores**: Signal:4/5 | Depth:4/5 | Unique:3/5 | Practical:4/5 | Anti-Hype:5/5
**Main Journal**: 78/100 | **Annex Potential**: 76/100 | **Overall**: 80/100

**Topics**: [[AIコーディングツール, Dockerネットワーク, iptables, OSS貢献, 新卒エンジニア育成]]

GMOメディアの新卒エンジニアが、Anthropic社のAIエージェントコーディングツール「Claude Code」をDockerコンテナ環境で利用する際に直面した、DNS名前解決の問題とその解決策を詳細に解説しています。Secureな開発環境構築のために実行した`init-firewall.sh`スクリプト内の`iptables -t nat -F`コマンドが、Dockerの内部DNS（`127.0.0.11`）を処理するNATルールを誤って削除してしまうことが原因でした。これにより、コンテナ間の通信や外部への名前解決ができなくなっていました。

著者は、新卒研修で培ったDockerコンテナとネットワークに関する基礎知識を活かし、`nslookup`や`iptables -L`コマンドを駆使して問題の根本原因を特定。解決策として、`iptables -t nat -F`を実行する前にDockerのDNS関連NATルールを保存し、クリア後にそれらを復元する`init-firewall.sh`への修正を提案しました。この修正は、特定のEphemeralポートを抽出し復元するアプローチから、より汎用的な`iptables-save`/`iptables-restore`をベースにしたレビューアからのフィードバックを経て、最終的に`xargs -L 1 iptables -t nat`でルールを再追加する方法でマージされました。

本記事は、新卒エンジニアが低レイヤーの技術課題に取り組む姿勢と、その解決のために公式ドキュメントやコードを読み込み、徹底的な検証環境を構築（`docker-compose`とシェルスクリプトを用いた修正前後の比較テスト）したプロセスを具体的に示しています。これは、実際の現場で遭遇する複雑な技術的問題に対するエンジニアリングのアプローチとして極めて実践的であり、AIコーディングツールをセキュアかつ安定的に運用するための基盤知識の重要性を再認識させます。新卒ながら大手OSSプロジェクトに貢献できた経験は、エンジニアとしての自信と成長に繋がり、読者にも「挑戦すること」の価値を伝えています。