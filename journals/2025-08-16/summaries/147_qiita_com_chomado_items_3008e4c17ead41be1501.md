## [トラブルシューティング] 自作 MCP サーバが Claude Desktop と繋がらない

https://qiita.com/chomado/items/3008e4c17ead41be1501

Claude DesktopでカスタムMCPサーバーに接続できない問題は、設定ファイルにおいてコマンドのフルパスを指定することで解決できることを提示します。

**Content Type**: ⚙️ Tools

**Scores**: Signal:4/5 | Depth:3/5 | Unique:3/5 | Practical:5/5 | Anti-Hype:5/5
**Main Journal**: 79/100 | **Annex Potential**: 76/100 | **Overall**: 80/100

**Topics**: [[Claude Desktop, MCPサーバー, トラブルシューティング, パス設定, 開発環境設定]]

この記事は、Claude Desktopで自作したMCPサーバーが接続できないという具体的なトラブルシューティング事例を解説しています。筆者は、ターミナルからは正常に動作するMCPサーバーが、Claude Desktopの`claude_desktop_config.json`に定義すると機能しない問題に直面しました。

この問題の核心は、`dotnet`コマンドを直接指定するのではなく、`/usr/local/share/dotnet/dotnet`のようにコマンドのフルパスを明記することでした。この解決策は、一般的な開発環境において特にMacユーザーが直面しがちな「`PATH`環境変数の違い」に起因すると考えられます。通常のターミナルセッションでは`~/.zprofile`などが読み込まれてパスが通っていても、アプリケーションが起動する非ログインシェルでは異なる環境変数が適用される場合があるためです。

ウェブアプリケーションエンジニアにとって、この知見は極めて重要です。AIエージェントや外部ツールを統合する際、設定ファイル内で外部コマンドを呼び出す際には、環境依存性を排除するために常にフルパスを指定するというベストプラクティスを再認識させます。これにより、異なる実行環境やシェル設定による不意の動作不良を防ぎ、デバッグ時間を大幅に短縮できる実用的なノウハウが得られます。AIを活用した開発ワークフローの堅牢性を高める上で、見落とされがちなシステムレベルの挙動を理解する貴重なヒントとなるでしょう。