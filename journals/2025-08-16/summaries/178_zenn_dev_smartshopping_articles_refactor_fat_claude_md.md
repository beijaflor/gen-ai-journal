## 脱・ファット・CLAUDE.md

https://zenn.dev/smartshopping/articles/refactor-fat-claude-md

Claude Codeの利用者がLLMの出力品質を最大化するため、CLAUDE.mdのコンテキスト管理を最適化し、プロンプトを効果的に分散する具体的な手法を解説します。

**Content Type**: ⚙️ Tools

**Scores**: Signal:4/5 | Depth:4/5 | Unique:3/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 81/100 | **Annex Potential**: 77/100 | **Overall**: 80/100

**Topics**: [[LLMコンテキスト管理, Claude Code, プロンプトエンジニアリング, 開発ワークフロー最適化, エージェントベース開発]]

CLAUDE.mdはClaude Codeのメモリ機能で、プロンプトを保存しLLMの挙動を調整できます。しかし、無関係な情報を含んだ「ファットなCLAUDE.md」は、LLMの出力品質低下やハルシネーションの原因となります。記事では、LLMには目的に必要な情報のみを与える「コンテキスト・エンジニアリング」の重要性を、チェーホフの銃の誤謬を引き合いに出して強調しています。

この課題に対し、CLAUDE.mdに全てを記述するのではなく、ユーザーメモリ、プロジェクトメモリ、カスタムスラッシュコマンド、サブエージェントといったClaude Codeが提供する複数の機能を活用し、プロンプトを適切に分散する方法を提案しています。

特に重要なのは、以下の機能分散です。
*   **CLAUDE.md**: ユーザーメモリには常に参照される基本的な個人設定を、プロジェクトメモリにはプロジェクト共通の基本ルールを記述し、その階層的な動的読み込みルールを理解してファイルを分割します。
*   **カスタムスラッシュコマンド**: 「コンポーネント設計・実装」のような複雑な手順を含むワークフローの再利用に最適です。これはメインセッションのコンテキストを消費します。
*   **サブエージェント**: 「デバッグ」「テスト」「PR作成」など、ワークフローの各ステップで呼び出される特定のタスクに特化します。メインとは独立したコンテキストウィンドウを使用するため、コンテキストを消費せず、並列実行も可能です。

これらの機能を適切に使い分けることで、タスク実行に必要なコンテキストのみをLLMに読み込ませることができ、コンテキストウィンドウの効率的な利用、タスク成功率の向上、チーム間での知識共有の標準化が実現します。開発者にとって、無駄なコンテキストによるLLMのパフォーマンス低下を防ぎ、より高品質なAI生成コードを得るための具体的かつ実践的なアプローチが示されています。