## Copilot Studio で登録した特定のナレッジのみから回答を生成させるアプローチ

https://qiita.com/Takashi_Masumori/items/fc66212f700a889741a8

Copilot Studioにおいて、ユーザーの選択に基づいて特定のナレッジソースのみを検索対象に制限し、RAGの回答精度を向上させる実装手法を提示する。

**Content Type**: 📖 Tutorial & Guide
**Language**: ja

**Scores**: Signal:4/5 | Depth:3/5 | Unique:3/5 | Practical:4/5 | Anti-Hype:4/5
**Main Journal**: 94/100 | **Annex Potential**: 91/100 | **Overall**: 72/100

**Topics**: [[Copilot Studio, RAG, Power Platform, ナレッジ管理, ローコード開発]]

著者は、Microsoft Copilot Studioを用いたRAG（検索拡張生成）システムにおいて、複数のナレッジソースが混在することによる回答精度の低下を回避するための具体的な実装アプローチを解説している。通常のRAG構成では、登録された全てのナレッジから情報が検索されるが、内容が類似していたり、特定の文脈に限定した回答が求められたりする場合、AIが意図しないソースを参照してしまうリスクがある。これに対し、著者はユーザーにカテゴリーを選択させ、それに基づいて検索対象のナレッジを動的に切り替える手法を推奨している。

実装の核心は、トピック内の「生成型の回答」ノードにおいて「選択したソースのみを検索する」設定を有効にし、特定のナレッジにチェックを入れることにある。これにより、システムはユーザーの選択したカテゴリーに関連する情報のみを確実に参照するようになる。著者はこの手法の重要な側面として、これが「オーケストレーションモード」ではなく、以前のPower Virtual Agentsの流れを汲む「クラシックモード」で動作することを強調している。オーケストレーションモードはAIの自律的な判断に依存するため、指示（プロンプト）通りに動かない可能性があるが、本手法のような「プログラム的」な実装は、動作の確実性が高いという利点がある。

一方で、クラシックモード特有の注意点として、回答が生成できなかった場合の挙動を開発者が明示的に定義する必要があることも指摘されている。具体的には、生成された回答を変数に保存し、その変数が空であるかどうかを条件分岐で判定して、適切なエラーメッセージや代替案内を出す仕組みを構築する必要がある。このように、AIの柔軟性とプログラムの確実性を組み合わせることで、実運用に耐えうる高精度なチャットボットが構築可能になると著者は主張している。最後に、回答後に再びカテゴリー選択に戻すような導線設計を提案しており、ユーザー体験（UX）の観点からも実用的なガイドとなっている。