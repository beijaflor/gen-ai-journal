## [Learnings from building AI agents](https://www.cubic.dev/blog/learnings-from-building-ai-agents)

**AIコードレビューエージェント開発から得られた教訓：ノイズを減らし、信頼を高める3つのアプローチ**

Cubic社が開発したAIコードレビューエージェントは、初期バージョンでは価値の低いコメントや誤検知といった「ノイズ」が多すぎるという課題を抱えていました。その結果、開発者はAIのコメントを無視するようになり、ツールの信頼性が低下していました。

この問題を解決するため、同社はアーキテクチャを大幅に改訂しました。最終的に成功したアプローチは、単一の巨大なエージェントから、より洗練されたシステムへの移行でした。主要な改善点は3つです。

1.  **明示的な推��ログの導入**: AIにフィードバックを出力させる前に、その判断理由を構造化データとして先に生成させました。これにより、AIの意思決定プロセスが透明化され、デバッグが容易になりました。

2.  **ツールの絞り込み**: 当初は多機能なツールを提供していましたが、推論ログを分析すると、実際に使われているのはごく一部のコア機能のみであることが判明しました。ツールを必要最低限に絞ることで、AIは本質的な問題の検証に集中できるようになり、精度が向上しました。

3.  **特化型マイクロエージェントの採用**: 一つのエージェントに多くのルールを詰め込むのではなく、「セキュリティ担当」「重複コード担当」「タイポ・ドキュメント担当」といった、それぞれが狭いスコープに特化した複数のマイクロエージェントに分割しました。これにより、各エージェントは集中力を維持し、高い精度を保つことができました。

これらの改善により、誤検知を51%削減し、プルリクエストあたりのコメント数を半減させることに成功しました。この事例から、AIエージェントを設計する上で、「推論の明確化」「ツールの簡素化」「タスクの専門化」が極めて重要であるという教訓が得られます。