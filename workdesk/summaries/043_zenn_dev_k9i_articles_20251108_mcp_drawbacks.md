## MCPの3つの欠点 - よりよく使うために知っておきたいこと

https://zenn.dev/k9i/articles/20251108_mcp_drawbacks

MCP（AI Model Context Protocol）は強力なツールである一方で、その設計上の制限を理解し、適切に対処することでAIエージェントの活用を最適化できます。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 86/100 | **Annex Potential**: 84/100 | **Overall**: 84/100

**Topics**: [[MCP, AIエージェント, コンテキストウィンドウ, トークン効率, サブエージェント]]

本記事は、AIエージェントの重要なプロトコルであるMCP（AI Model Context Protocol）の3つの欠点を深く掘り下げ、それぞれの課題に対する実践的な対策を解説しています。ウェブアプリケーションエンジニアがAIエージェントをより効果的に活用するために、これらの特性を理解することが重要です。

まず、著者は「AIエージェントは必ずしもMCPが得意ではない」と指摘します。LLMはコード生成の訓練は豊富ですが、ツール呼び出しの訓練データは非常に限られているため、TypeScriptやCLIツールの方が得意な傾向があります。これは実装上の問題ではなく、LLMの学習特性による根本的な限界であり、GitHub MCPよりも`gh`コマンドの方がうまくいくといった経験はこれに起因すると説明されています。対策として、MCPを盲目的に使うのではなく、CLIなどの代替手段も検討するべきだと提言されています。

次に、「MCPツールの事前ロードでコンテキストが圧迫される」という問題が挙げられています。ほとんどのMCPクライアントは、すべてのツール定義を事前にコンテキストへ直接ロードするため、ツールの説明がコンテキストウィンドウのスペースを占有し、応答時間とコストが増加します。少数のツールでも意図しない動作を引き起こす可能性があり、数千のツールに接続されている場合は数十万トークンもの処理が必要になる深刻な課題です。 Anthropic自身もこの課題を認識し、必要なツールのみをオンデマンドで読み込むアプローチを提案しており、大幅なトークン削減の可能性を示しています。現時点での対策としては、不要なMCPを無闇に有効化せず、本当に必要なツールだけを選択的に有効にすることが推奨されています。

最後に、「MCPのやり取り情報もコンテキストを圧迫する」という点です。MCPでは、ツール呼び出しとその結果がすべてモデルのコンテキストを通過するため、大量のデータを扱うタスク（例: 2時間の会議録音の転送）では、中間データが複数回モデルを通過し、数万トークンの追加処理が発生します。これにより、本来のタスク遂行に悪影響を及ぼし、大規模なデータ構造ではデータコピー時のエラーも発生しやすくなります。この課題への対策として、独立したコンテキストで動作し、MCPツールを選択的に割り当てられる「サブエージェント」の活用が有効です。タスクをサブエージェントに委譲することで、中間データがメインエージェントのコンテキストを通過するのを防ぎ、トークン消費を大幅に削減できる可能性が示されています。

著者は、MCPの欠点を理解することが、AIエージェントをより効果的に活用するための第一歩であると結論付けています。不要なMCPの有効化を避け、代替手段を検討し、サブエージェントを適切に活用することで、パフォーマンスとコスト効率の良いAIエージェントの利用が可能になります。