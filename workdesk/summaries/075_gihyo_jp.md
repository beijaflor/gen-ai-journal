## Claude Codeのコンテキストウィンドウを完全に理解する

https://gihyo.jp/article/2025/12/get-started-claude-code-05

Claude Codeの200kトークンのコンテキストウィンドウの内訳を詳細に分析し、トークン効率を最大化するための機能選択と管理手法を提示する。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:5/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 89/100 | **Annex Potential**: 78/100 | **Overall**: 88/100

**Topics**: [[Claude Code, コンテキストウィンドウ, トークン管理, MCP, Agent Skills]]

筆者は、Claude Codeを使いこなす上で「コンテキストウィンドウの管理」がエンジニアリングの成否を分けると主張している。200,000トークン（小説約1〜2冊分）という広大なウィンドウを持ちながらも、実際にはシステム側での占有が大きく、効率的な開発にはその内訳の理解が不可欠である。

まず、起動時点でコンテキストの約30%が自動的に占有される。これには、Claude Codeの挙動を規定する「システムプロンプト（約1.4%）」、ファイル操作やシェル実行を担う「システムツール（約9.7%）」、そして会話が逼迫した際に履歴を要約して収めるための「Auto Compact（自動圧縮）バッファ（22.5%）」が含まれる。つまり、ユーザーが自由に使える実質的な領域は、初期状態で既に7割程度に制限されている。

次に、常駐するリソースの管理が重要となる。「CLAUDE.md」はセッション間で記憶を保持するが、肥大化するとパフォーマンスを低下させる。また、外部機能を拡張する「MCPサーバー」は、使用しないメソッドの定義（スキーマ）まで保持し続けるため、トークン消費が激しく非効率な側面がある。これに対し、筆者は「Agent Skills」の活用を強く推奨している。Agent Skillsは、スキルの名前と概要（メタデータ）のみをコンテキストに保持し、必要時のみ詳細な手順を読み込む設計となっており、占有量を100トークン以下に抑えられる非常にトークン効率の良い仕組みである。

さらに、IDE連携（`/ide`）の仕様にも注意を促している。現在開いているファイルや選択範囲が自動で送信されるため、無関係なコードによるコンテキストの圧迫や、`.env`などの秘匿情報の意図しない送信といったセキュリティリスクを孕んでいる。

最後に、筆者は各種ツールの「コンテキスト占有量」と「発火タイミング」を整理し、スラッシュコマンド、サブエージェント、Hooks、MCP、Agent Skillsを適切に使い分けることが、LLM時代のエンジニアリングにおける新たな定石であると結論づけている。エンジニアは「有限なリソースとしてのコンテキスト」を意識し、目的に応じて最適な拡張手段を選択すべきだという。