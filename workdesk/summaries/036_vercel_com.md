## エージェントのツールを80%削減：Vercelが辿り着いた「引き算」のAIエージェント設計

https://vercel.com/blog/we-removed-80-percent-of-our-agents-tools

**Original Title**: We removed 80% of our agent’s tools

複雑な専用ツール群を排除し、サンドボックス内でのBashコマンド実行と生のファイル探索に集約することで、AIエージェントの性能と信頼性を劇的に向上させる。

**Content Type**: ⚙️ Tools
**Language**: en

**Scores**: Signal:5/5 | Depth:4/5 | Unique:5/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 94/100 | **Annex Potential**: 93/100 | **Overall**: 92/100

**Topics**: [[AIエージェント, Vercel AI SDK, プロンプトエンジニアリング, Bash, 推論最適化]]

Vercelは、社内のデータ分析支援エージェント「d0」の開発を通じて得た、AIエージェント設計における重要なパラダイムシフトを報告している。当初、d0は自然言語の質問をSQLに変換するため、スキーマ検索やクエリバリデーションといった多数の専用ツール、重厚なプロンプトエンジニアリング、そして厳密なコンテキスト管理を備えた複雑なアーキテクチャを採用していた。しかし、この設計はモデルのアップデートのたびに再調整が必要で、動作が遅く、メンテナンスコストが極めて高い「脆弱な足場」となっていた。

筆者はこの状況を「重力に抗い、モデルの推論を不必要に制約していた」と分析する。そこで、Vercel AI SDK 6.0の`ToolLoopAgent`と`Vercel Sandbox`を活用し、アーキテクチャを根本から簡素化した。具体的には、80%のツールを削除し、代わりにエージェントがサンドボックス内で`grep`、`cat`、`ls`、`find`といった標準的なBashコマンドを自由に実行できる「ファイルシステム・エージェント」へと転換した。これにより、AI（Claude 4.5）は人間がドキュメントを読むように自らファイルを探索し、セマンティックレイヤー（YAMLやMarkdownで記述されたデータ定義）を直接理解してSQLを生成するようになった。

この「引き算」のアプローチの結果、パフォーマンスは劇的に向上した。実行速度は3.5倍（平均274.8秒から77.4秒へ）高速化し、ベンチマークにおける成功率は80%から100%に達した。さらに、トークン使用量は37%削減され、実行ステップ数も42%減少するという、コストと効率の両面で圧倒的な成果を上げている。特筆すべきは、モデルが自ら試行錯誤してエッジケースに対応するようになり、以前のような「制約」がむしろAIの能力を阻害していたことが証明された点だ。

著者は、AIエージェント開発者への教訓として「Addition by subtraction（引き算による改善）」の重要性を説く。Unixの抽象化（ファイルシステム）は極めて強力であり、複雑な独自ツールを作るよりも、AIにとって読みやすいドキュメントや構造化されたデータを用意することに注力すべきであると主張している。結論として、今日のモデルの限界に合わせた制約を設けるのではなく、半年後のより賢いモデルを見据え、最小限のアーキテクチャから始めるべきであるという指針を提示している。