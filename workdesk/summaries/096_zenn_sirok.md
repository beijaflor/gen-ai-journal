## その分析、Cursorにやらせてみませんか？

https://zenn.dev/sirok/articles/8fec2c27d81b32

シロクのエンジニアが、Cursor CLI、Snowflake、Pythonを組み合わせ、データ分析レポートの自動生成とSlackへの自動投稿システムを構築する方法を解説します。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:5/5
**Main Journal**: 88/100 | **Annex Potential**: 87/100 | **Overall**: 88/100

**Topics**: [[Cursor CLI, Snowflake連携, AIレポート生成, 自動化, GitHub Actions]]

シロクのエンジニアが、日々手動で行っていた「前日のデータサマリをSlackに投稿する作業」の自動化について解説しています。この作業はクエリ実行からCSV出力、グラフ化、Slack投稿まで多くの手作業を伴い、非効率でした。この記事では、Cursor CLI、Snowflake、Python、そしてGitHub Actionsを組み合わせることで、この一連のプロセスを完全に自動化する仕組みを提案しています。

システム全体の構成は、まずSnowflakeからデータを取得するためのSnowsqlとCursor CLIのセットアップから始まります。次に、SQLクエリで必要なデータを抽出し、YAML形式でレポート定義を作成します。このYAML定義を基に、AI（Cursor CLI）がMarkdown形式のレポートを生成します。最終的に、GitHub Actionsを使って定期的にこのプロセスを実行し、生成されたレポートをSlack Webhookを通じて自動投稿する流れです。

特に注目すべきは、Cursor CLIをPythonから呼び出す`CursorClient`クラスの実装です。このクラスは、CSVデータとYAML仕様を受け取り、Cursor CLIが理解できる統合プロンプトを構築します。そして、そのプロンプトを`cursor-agent`に渡すことで、AIによるMarkdownレポート生成を抽象化しています。これにより、分析者はSQLとYAMLを書くだけで、複雑なAIとの対話部分を意識せずに済みます。

レポートのフォーマットは`reports.yaml`ファイルで定義されており、タイトル、サマリ、セグメント別テーブル、インサイトなどの構造を宣言的に記述できます。このYAML定義の最大の利点は、SQLを変更することなくレポートのレイアウトや表示形式を柔軟に差し替えられる点にあります。KPIの追加やアラート表示など、ビジネス要件に合わせた高速なレポート組み替えが可能となり、運用負荷を大幅に削減します。

シロク社ではこの仕組みを実際に各事業部のKPI進捗レポーティングに活用しており、日々の売上指標や顧客セグメントの変化などを毎日自動共有することで、現場の状況把握を早め、迅速な意思決定を支援しています。著者は、AIが実装を代行し、人が設計を磨く新しいワークスタイルがこのプロジェクトで自然に実現できたと述べており、定型分析業務の効率化と品質向上においてAIツールの活用が重要であることを示唆しています。