## openai/codex でのプロジェクト固有MCPを設定する

https://zenn.dev/mizchi/articles/codex-mcp-config-settings

OpenAI Codexにおけるプロジェクト固有のMCP設定の課題に対し、環境変数やコマンドライン引数を活用した非公式な回避策を詳細に解説します。

**Content Type**: ⚙️ Tools

**Scores**: Signal:4/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:5/5
**Main Journal**: 88/100 | **Annex Potential**: 87/100 | **Overall**: 88/100

**Topics**: [[OpenAI Codex, MCP, 開発ワークフロー改善, 設定管理, コマンドラインツール]]

OpenAI Codexの現状では、MCP (Modular Code Processor) の設定がグローバルに限定されており、Claude Codeのようにプロジェクト固有のMCPを管理できないという課題があります。これは、`lsmcp`や`serena`のようなコード解析ツールを特定のプロジェクトでのみ利用したいWebアプリケーションエンジニアにとって、非効率的な状況を生み出す可能性があります。

本記事は、この課題を解決するための二つの非公式な回避策を提示します。一つ目は、`CODEX_HOME`環境変数を使ってCodexの設定ファイルをプロジェクトディレクトリ内の`.codex`に指定する方法です。これにより、プロジェクト固有の`config.toml`を読み込ませることが可能になります。しかし、認証情報なども含まれる`.codex`ディレクトリをバージョン管理下に置くことはセキュリティ上の懸念があり、デバッグ用途に限定すべきと筆者は指摘します。

二つ目の、より実用的な方法は、Codexの`--config='...'`コマンドライン引数を利用し、`mcp_servers`設定を直接上書きすることです。これにより、特定のMCP（例：`playwright-mcp`や`serena`）を起動時にのみ有効化できます。記事では、`jq`と`sed`を組み合わせたシェルエイリアスで`.mcp.json`ファイルから動的に設定を読み込む高度なテクニックや、`serena`用の具体的な設定例も紹介されています。

これらの手法はあくまで一時的な解決策であり、将来的にCodexが公式にプロジェクト固有設定をサポートすれば不要になる可能性が高いと筆者は指摘しています。しかし、現状の制約下で開発効率を向上させたいWebアプリケーションエンジニアにとって、この実践的なTIPSは、AIを活用した開発ワークフローを柔軟にカスタマイズするための重要な手がかりとなるでしょう。プロジェクトごとに最適なAIアシスタントの挙動を実現し、開発体験を向上させるために、これらの回避策は非常に価値があります。