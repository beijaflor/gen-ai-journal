## ファイルシステムとBashでAIエージェントを構築する方法

https://vercel.com/blog/how-to-build-agents-with-filesystems-and-bash

**Original Title**: How to build agents with filesystems and bash

提案する：複雑なカスタムツールを構築する代わりに、サンドボックス内のファイルシステムとBashコマンドを用いてAIエージェントのコスト削減と精度向上を実現する手法。

**Content Type**: 📖 Tutorial & Guide
**Language**: en

**Scores**: Signal:5/5 | Depth:4/5 | Unique:5/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 94/100 | **Annex Potential**: 94/100 | **Overall**: 92/100

**Topics**: [[AI Agents, Vercel AI SDK, Bash-Tool, RAG Architecture, Developer Experience]]

Vercelのエンジニア、Ashka Stephen氏は、AIエージェントに特定の情報を与えるための複雑なカスタムツールを構築する代わりに、サンドボックス内のファイルシステムとBashツールを活用する「よりシンプルで堅牢なアプローチ」を提案している。同氏によれば、社内のセールスコール要約エージェントにおいてこの手法を導入したところ、Claude Opus 4.5での実行コストが1コールあたり1ドルから0.25ドルへと大幅に削減され、同時に出力品質も向上したという。

このアプローチの核心は、LLMが膨大な量のコードでトレーニングされているという事実にある。LLMはディレクトリのナビゲート、ファイル内検索（grep）、複雑なコードベースでの状態管理に極めて長けている。著者は、カスタマーサポートのチケット、商談のトランスクリプト、CRMデータなどを「ファイル」として構造化し、エージェントにUnixコマンド（ls, find, grep, cat等）を与えれば、モデルはコードを扱うのと同様の能力をデータ探索に発揮できると主張している。

従来のRAG（ベクトル検索）やプロンプトへの全流し（Prompt Stuffing）と比較して、ファイルシステムを活用したコンテキスト管理には明確な利点がある。ベクトル検索は意味的な類似性には強いが、構造化データから特定の値を正確に取得する際には精度を欠くことがある。一方、ファイルシステムであれば、ドメインに合わせた階層構造を直接マッピングでき、`grep`などを用いることで「価格に関する異論」といった特定の情報をピンポイントで、かつ最小限のトークン消費で抽出できる。

著者は具体的な実装例として、顧客レコードやチケット履歴をディレクトリ階層に分ける方法や、セールスコールのメタデータとトランスクリプトを整理する方法を提示している。エージェントはまず`ls`で何があるかを確認し、`grep`でパターンを探し、必要なセクションだけを読み取る。これにより、開発者が事前に定義したパラメータの範囲を超えて、エージェントが自律的にコンテキストを構築することが可能になる。

結論として、著者は「エージェントにはファイルシステムとBashがあれば十分である」と述べ、カスタムツールの作成を控えるよう促している。Vercelはこれを支援するために、サンドボックス環境でのファイル操作を可能にする`bash-tool`をオープンソース化しており、AI SDKと組み合わせることで、モデルの改善がそのままエージェントの能力向上に直結する「将来にわたって有効なアーキテクチャ」を構築できるとしている。