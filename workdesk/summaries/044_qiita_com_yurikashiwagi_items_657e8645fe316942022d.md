## Google CloudのロードバランサーとCDNのコスト計算で困った話

https://qiita.com/yurikashiwagi/items/657e8645fe316942022d

Google CloudのCloud Load BalancingとCloud CDNを組み合わせた際のランニングコスト計算における誤解と、正しい見積もり方法を詳細な比較を通じて解説し、クラウド料金計算の複雑性に警鐘を鳴らす。

**Content Type**: Tutorial & Guide
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:3/5 | Practical:5/5 | Anti-Hype:5/5
**Main Journal**: 86/100 | **Annex Potential**: 82/100 | **Overall**: 84/100

**Topics**: [[Google Cloud, ロードバランサー, CDN, コスト計算, 料金最適化]]

この記事は、Google CloudのCloud Load Balancing（外部ALB）とCloud CDNを併用する際のランニングコスト計算で陥りやすい誤解と、その正しい算定方法を解説しています。著者は当初、料金計算ツールでCloud CDNを有効にした方がコストが高くなるという、一般的な認識と異なる結果に直面しました。

この認識のずれの主な原因は二つあると指摘されています。一つは、ロードバランサー単体で使用した場合に発生する「インターネットデータ転送料金」の計上漏れ。これはロードバランサーの料金計算ツールには含まれておらず、別途Network Service Tierで計算が必要です。もう一つは、Cloud CDNを併用した場合に「outbound転送料金」が二重に課金されるという誤った認識です。

著者は、月間1,000GiBのデータ転送、キャッシュヒット率60%などの前提条件を設け、失敗例と正しい計算パターンを具体的に比較しています。失敗例では、ロードバランサー単体ではインターネットデータ転送料金が加算されず安価に見え、CDN併用ではロードバランサーとCDNの両方で送信データ費用を計上して高価になっていました。

正しい計算パターンでは、ロードバランサー単体の場合に別途インターネットデータ転送料金（約18,241円）を加算することで総額24,633円となります。一方、CDNを併用する場合は、Cloud CDNが有効化されるとロードバランサーからの送信データ料金は発生せず、「CDNのキャッシュ データ転送（送信）」が適用されるため、ロードバランサーの送信データは0GiBとして計算し、キャッシュミス分は「キャッシュフィル」として計上します。これにより、CDN併用時の総額は18,514円となり、ロードバランサー単体の場合よりも安価になることが示されています。

この事例は、クラウドサービスの料金計算が複雑であり、サービス間の連携や課金体系の深い理解が不可欠であることを浮き彫りにしています。著者は、公式ドキュメントで不明な点はサポートに問い合わせることの重要性を強調しています。