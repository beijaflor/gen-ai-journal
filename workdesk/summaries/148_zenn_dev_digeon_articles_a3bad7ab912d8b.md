## ドメイン設計だけじゃない！型を駆使してAI駆動開発の精度を上げよう

https://zenn.dev/digeon/articles/a3bad7ab912d8b

AIによるコード生成や新規メンバー参画で生じるコードのばらつきに対し、TypeScriptの型を駆使してドメインだけでなくアーキテクチャ全体を静的解析で厳格に縛り、開発の精度と保守性を飛躍的に向上させる手法を提案します。

**Content Type**: 📖 Tutorial & Guide
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:3/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 85/100 | **Annex Potential**: 79/100 | **Overall**: 80/100

**Topics**: [[TypeScript, ドメイン駆動設計, AI駆動開発, 型安全, クリーンアーキテクチャ]]

この記事では、AIによるコーディングや新規メンバー参画によって発生しがちな、意図せず不揃いになるコードの課題に対し、TypeScriptの型を最大限に活用してアーキテクチャレベルでコードの一貫性を保つ手法を解説します。著者は、型でコードを縛ることの最大のメリットは「しょうもないテストケースの数を減らせる」ことだと主張しています。型による静的解析がビルド・デプロイ前にエラーを検出するため、実装ミスが放置されるリスクをなくし、品質保証のコストを大幅に削減します。

ドメイン設計において直和型を効果的に使うことで、アプリケーション内のオブジェクトが取りうる様々な状態を型で表現し、無駄な条件分岐やテストを排除できる具体例が示されています。さらに、クリーンアーキテクチャのような明確な設計思想を持っていても、人やAIがコーディングルールを完璧に遵守するとは限らず、「バグにはならないが、書きぶりが異なるコード」が量産されがちだと指摘。この曖昧さを解消するため、各層の責務と依存関係をTypeScriptの型で表現することで、静的解析がルール違反を検知し、啓蒙の労力を劇的に削減できると筆者は述べています。

具体的には、UseCase層のインタラクターを「依存性注入されたアダプター層のインターフェースを抽象的に利用し、入力を処理して出力を返す関数」として型定義する例が示されています。これにより、`neverthrow`の`Result`型利用や特定のエラー型（`AppError`）での返却、認証済みユーザーにおける`userID`の必須化といったルールを静的に強制できます。

また、`Zod`で型定義を行い、それを`Hono`のAPIスキーマに登録し、さらに`Orval`と組み合わせることで、バックエンドからフロントエンドまでアプリケーション全体を型安全で一貫性のある形で連携できる点も強調されています。このアプローチは、実装段階では疎結合でありながら、アーキテクチャ的には型で密結合にすることで、システムの規模や開発体制がスケールするほど大きな複利効果をもたらすと説明しています。最終的に、人にもAIにも優しいコーディングを実現するためには、型解析という共通の物差しでコードを測れる状態にしておくことが重要であると結論付けています。