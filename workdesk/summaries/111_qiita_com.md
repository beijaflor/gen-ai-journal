## いい感じのポーリングをスキルに組み込む #ClaudeCode

https://qiita.com/uhyo/items/796b73101988db70bde6

AIエージェントが効率的に状態変化を監視できるよう、ハッシュ値を利用して「変化があるまで出力を返さない」ポーリング用ラッパーを導入し、トークン消費とエージェントの離脱を防ぐ。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:5/5 | Depth:4/5 | Unique:4/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 89/100 | **Annex Potential**: 87/100 | **Overall**: 88/100

**Topics**: [[Claude Code, AI Agents, CI/CD Automation, Token Efficiency, Polling Optimization]]

**Claude Code**などのAIエージェントにCIの完了やレビューの状態を監視させる際、単純なループと`sleep`によるポーリングは、トークン（コンテキスト）の過剰消費やAIが「飽きて」作業を中断するといった問題を引き起こします。本記事では、この課題を解決するために開発されたラッパーツール「**kaopolling**」の実装と活用術が紹介されています。

このツールは、実行したコマンドの出力をハッシュ化し、前回実行時と変化がない限り出力を返さず終了しません。これにより、AIにとっては「1回の実行＝1回の変化検知」という効率的なフローが形成され、**コンテキストの節約**とタスク遂行の安定性が向上します。また、**Claude Code**が持つ「10分以上のプロセスを自動でバックグラウンド移行する機能」と組み合わせることで、数時間に及ぶレビュー待ちタスクをAIに自律的に管理させる手法についても具体的に解説されています。

AIエージェントに長時間かかる開発ワークフローを自律的に実行させたいエンジニアや、**Claude Code**のカスタムスキルの実用性を高めたい開発者にとって、即効性の高いプラクティスです。