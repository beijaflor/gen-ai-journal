## プロダクションAI機能のフレームワークをLangGraphに完全移行

https://tech.every.tv/entry/2025/12/09/120000

既存のAI機能が抱える複雑なワークフローと責務混同の課題を解決するため、LangGraphへのフレームワーク移行を詳説します。

**Content Type**: ⚙️ Tools
**Language**: ja

**Scores**: Signal:5/5 | Depth:4/5 | Unique:3/5 | Practical:5/5 | Anti-Hype:4/5
**Main Journal**: 85/100 | **Annex Potential**: 80/100 | **Overall**: 84/100

**Topics**: [[LangGraph, LLMアプリケーション開発, リファクタリング, アーキテクチャ設計, 責務分離]]

株式会社エブリーは、デリッシュキッチンが提供する会話形式レシピ検索「デリッシュAI」機能において、プロダクションで稼働するAI機能のフレームワークをフルスクラッチの関数パイプラインからLangGraphへ完全に移行したことを報告しています。

デリッシュAIは公開から1年以上が経過し、機能追加や改善を繰り返す中でワークフローが複雑化し、以下の問題に直面していました。第一に、コアビジネスロジック、LLM呼び出し、ワークフロー、状態管理といったアーキテクチャの責務が混同し、特に並列処理が絡むワークフローは追跡が困難でした。ユーザー入力に基づく分岐処理がワークフローにロジックを持たせてしまい、追加・修正実装の負荷が高い状態でした。第二に、責務が不明確なために変更の柔軟性がなく、処理順序の変更や並列化が困難で、新しい施策や精度改善のためのワークフロー変更がストレスとなっていました。結果として、フルスクラッチでの実装が限界に達し、開発スピードの低下が予測される状況でした。

これらの課題を解決するため、同社は明確な責務分離、ワークフローの変更柔軟性・拡張性、プロバイダ非依存性、型制約、テストのしやすさといった要件を設定しました。その結果、現時点でこれら全ての要素にマッチするLangChainおよびLangGraphを採用しました。特に、2025年10月22日にリリースされたv1.0の安定性も決め手となったと述べています。

LangGraph適用後のアーキテクチャでは、`nodes/`でビジネスロジック、`types/state/`で型安全な状態定義、`workflows/`でワークフローのグルーピングと全体のフロー制御を行うことで、明確な責務分離を実現しました。LangGraphの`State`、`Node`、`Edge`の概念を活用し、サブワークフローを定義することで、処理の再利用性やテスト容易性を向上させ、エッジの向きを変えるだけで並列実行を容易に実現できることも示されています。また、LLMプロバイダの変更に関しても、LangChainのパートナーパッケージを利用することで、適用箇所のライブラリ変更のみで置き換えが可能となります。

著者は、最初からLangGraphを採用すべきだったとは必ずしも言えないとしつつ、フレームワークの思想や解決したい課題を深く理解することの重要性を強調しています。この移行により、明確な責務分離と変更に耐えうる柔軟なコードベースが構築できたと結論付けています。