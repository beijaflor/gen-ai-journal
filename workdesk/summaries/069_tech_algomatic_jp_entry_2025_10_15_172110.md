## AIエージェントを支える技術: コンテキストエンジニアリングの現在地

https://tech.algomatic.jp/entry/2025/10/15/172110

AIエージェント構築において、大規模言語モデル(LLM)の効率的で高品質な出力を実現するために不可欠な「コンテキストエンジニアリング」の全体像とその具体的な手法を体系的に解説します。

**Content Type**: 🛠️ Technical Reference
**Language**: ja

**Scores**: Signal:4/5 | Depth:4/5 | Unique:3/5 | Practical:4/5 | Anti-Hype:4/5
**Main Journal**: 76/100 | **Annex Potential**: 74/100 | **Overall**: 76/100

**Topics**: [[コンテキストエンジニアリング, AIエージェント, LLM, RAG, プロンプトエンジニアリング]]

大規模言語モデル（LLM）を用いたAIエージェントの構築において、その性能と品質を決定づける重要な技術が「コンテキストエンジニアリング」です。本記事は、2025年10月時点でのこの技術の現在地と具体的な手法について、webアプリケーションエンジニアの視点から体系的に解説しています。

コンテキストエンジニアリングは、LLMに与える情報の質と量を制御する技術であり、単一タスクに特化するプロンプトエンジニアリングよりも広範に、複数回や反復的な推論を含む長期的な処理を対象とします。RAG（検索拡張生成）もこの領域の一部とされています。その重要性は、LLMが処理できるコンテキスト量に限界があり（Context RotやLost in the Middleといった現象で知られる）、入力する情報の品質が直接出力の品質に影響するためです。著者は、効率的なエージェント構築には、LLMが必要な情報のみを正確に活用できるよう制御することが不可欠だと強調します。

具体的な手法として、コンテキストエンジニアリングは以下の三つの要素で構成されます。

1.  **Context Retrieval & Generation（コンテキスト取得と生成）**:
    LLMがタスク遂行に必要な情報を「必要な時に（just in time）」取得・生成するアプローチです。外部データベースからのRAGによる情報取得、ユーザーのクエリ書き換え、HyDEやSelf-RAGのようなコンテキスト生成手法が含まれます。

2.  **Context Processing（コンテキスト処理）**:
    取得したコンテキストをLLMが活用しやすい形に加工するフェーズです。冗長な情報やノイズを除去するために、ランキング、フィルタリング、要約、圧縮（Claude CodeのSummarization/Compressionなど）が行われます。特に要約はRAGとの相性が良く、FG-RAGのような手法が有効です。また、レイテンシやコストを考慮したKVキャッシュの最適化、システムプロンプトの品質向上、Few-shotプロンプティングにおける多様なコンテキストの活用などもこの処理に含まれます。

3.  **Context Management（コンテキスト管理）**:
    一度獲得したコンテキストを長期的に活かすための管理方法です。セッション単位の短期記憶（ScratchpadやStateとして分類され、Claude CodeのTODO.md/NOTES.mdのようなファイルシステム活用や、エージェントの失敗ログの保持も有効）と、永続的な長期記憶が存在します。マルチエージェントシステムにおいては、複数のエージェント間で知識・記憶・状態の整合性を保つため、コンテキストの同期（Context Synchronization）、要約/圧縮情報の共有、共通DBへの保存などが重要となります。

これらの手法を適切に組み合わせることで、AIエージェントの安定性と性能が向上すると、著者はその具体的な経験を交えながら説明しています。