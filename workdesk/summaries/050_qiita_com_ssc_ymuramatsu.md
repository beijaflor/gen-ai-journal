## CLAUDE_CONFIG_DIR を設定して、Claude Code の設定ファイルの場所を変更する

https://qiita.com/ssc-ymuramatsu/items/28f0f73741859f49f17a

Claude Agent SDK (旧 Claude Code SDK) の設定ファイルであるCLAUDE.mdの参照パスを環境変数で変更し、複数エージェント運用時の設定衝突問題を解決する具体的な手順を提示する。

**Content Type**: ⚙️ Tools

**Scores**: Signal:4/5 | Depth:3/5 | Unique:3/5 | Practical:5/5 | Anti-Hype:5/5
**Main Journal**: 79/100 | **Annex Potential**: 76/100 | **Overall**: 80/100

**Topics**: [[Claude Agent SDK, 設定管理, 環境変数, 開発ワークフロー, AIエージェント]]

Webアプリケーション開発において、AIエージェントの導入が進む中、Claude Agent SDK（旧Claude Code SDK）の適切な設定管理は、開発ワークフローの効率化と安定性の鍵となります。本記事は、Claude Codeの設定ファイルである`CLAUDE.md`の保存場所をユーザー固有のホームディレクトリ（`~/`）から変更し、特に複数エージェントを運用する際に発生しうる設定衝突や予期せぬ挙動を回避する具体的な手法を解説しています。

著者は、`CLAUDE_CONFIG_DIR`環境変数を設定しても、エージェントが依然として`~/.claude/CLAUDE.md`を読み込んでしまうバグに遭遇。その原因をminifiedされたnpmコードの解析により、Claude Codeが作業ディレクトリから`CLAUDE.md`を「Project Memory File」として遡って読み込む挙動にあることを突き止めました。この問題の解決策として、`CLAUDE_CONFIG_DIR`を例えば`~/.config/claude`のように設定し、既存の関連設定ファイルを新しいディレクトリへ移動、その後Claude Codeを再起動・再ログインする手順を提示しています。

この知見は、Webアプリケーションエンジニアにとって非常に重要です。なぜなら、AIエージェントを利用した開発において、個人のデフォルト設定とプロジェクト固有の設定を分離することは、異なるプロジェクト間での設定混同を防ぎ、再現性の高い開発環境を維持するために不可欠だからです。また、エージェントごとに異なるキャラクターや振る舞いを定義したい場合にも、設定ファイルを明確に分離できることで、開発の柔軟性が格段に向上します。さらに、システム設定をより標準的な`.config`ディレクトリ配下に整理することで、ファイルシステムの管理も整然とし、長期的なメンテナンス性にも寄与します。この解決策は、AIを活用した開発ワークフローをより堅牢で効率的なものにするための実用的なステップを提供します。